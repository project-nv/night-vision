/* NightVisionCharts v0.1.1 | License: MIT
 © 2022 ChartMaster. All rights reserved */
var os=(K,W,ve)=>{if(!W.has(K))throw TypeError("Cannot "+ve)};var lt=(K,W,ve)=>(os(K,W,"read from private field"),ve?ve.call(K):W.get(K)),ki=(K,W,ve)=>{if(W.has(K))throw TypeError("Cannot add the same private member more than once");W instanceof WeakSet?W.add(K):W.set(K,ve)},Ji=(K,W,ve,pt)=>(os(K,W,"write to private field"),pt?pt.call(K,ve):W.set(K,ve),ve);(function(K,W){typeof exports=="object"&&typeof module!="undefined"?W(exports):typeof define=="function"&&define.amd?define(["exports"],W):(K=typeof globalThis!="undefined"?globalThis:K||self,W(K.NightVision={}))})(this,function(K){var it,nt;"use strict";function W(){}const ve=i=>i;function pt(i){return i()}function xi(){return Object.create(null)}function Ve(i){i.forEach(pt)}function Ci(i){return typeof i=="function"}function de(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function ls(i){return Object.keys(i).length===0}const Oi=typeof window!="undefined";let as=Oi?()=>window.performance.now():()=>Date.now(),Wt=Oi?i=>requestAnimationFrame(i):W;const at=new Set;function Pi(i){at.forEach(e=>{e.c(i)||(at.delete(e),e.f())}),at.size!==0&&Wt(Pi)}function cs(i){let e;return at.size===0&&Wt(Pi),{promise:new Promise(t=>{at.add(e={c:i,f:t})}),abort(){at.delete(e)}}}function ie(i,e){i.appendChild(e)}function gt(i,e,t){const s=Zt(i);if(!s.getElementById(e)){const n=Q("style");n.id=e,n.textContent=t,Ni(s,n)}}function Zt(i){if(!i)return document;const e=i.getRootNode?i.getRootNode():i.ownerDocument;return e&&e.host?e:i.ownerDocument}function us(i){const e=Q("style");return Ni(Zt(i),e),e.sheet}function Ni(i,e){return ie(i.head||i,e),e.sheet}function Z(i,e,t){i.insertBefore(e,t||null)}function q(i){i.parentNode.removeChild(i)}function ct(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function Q(i){return document.createElement(i)}function hs(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ze(i){return document.createTextNode(i)}function Ie(){return Ze(" ")}function Je(){return Ze("")}function Qe(i,e,t,s){return i.addEventListener(e,t,s),()=>i.removeEventListener(e,t,s)}function fs(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function x(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function ds(i){return Array.from(i.childNodes)}function Mt(i,e){e=""+e,i.wholeText!==e&&(i.data=e)}function ps(i,e,{bubbles:t=!1,cancelable:s=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(i,t,s,e),n}class gs{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,s=null){this.e||(this.is_svg?this.e=hs(t.nodeName):this.e=Q(t.nodeName),this.t=t,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Z(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(q)}}const kt=new Map;let Jt=0;function ms(i){let e=5381,t=i.length;for(;t--;)e=(e<<5)-e^i.charCodeAt(t);return e>>>0}function vs(i,e){const t={stylesheet:us(e),rules:{}};return kt.set(i,t),t}function Ri(i,e,t,s,n,r,o,u=0){const a=16.666/s;let l=`{
`;for(let g=0;g<=1;g+=a){const A=e+(t-e)*r(g);l+=g*100+`%{${o(A,1-A)}}
`}const d=l+`100% {${o(t,1-t)}}
}`,m=`__svelte_${ms(d)}_${u}`,I=Zt(i),{stylesheet:y,rules:b}=kt.get(I)||vs(I,i);b[m]||(b[m]=!0,y.insertRule(`@keyframes ${m} ${d}`,y.cssRules.length));const p=i.style.animation||"";return i.style.animation=`${p?`${p}, `:""}${m} ${s}ms linear ${n}ms 1 both`,Jt+=1,m}function Is(i,e){const t=(i.style.animation||"").split(", "),s=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),n=t.length-s.length;n&&(i.style.animation=s.join(", "),Jt-=n,Jt||ys())}function ys(){Wt(()=>{Jt||(kt.forEach(i=>{const{ownerNode:e}=i.stylesheet;e&&q(e)}),kt.clear())})}let mt;function vt(i){mt=i}function Di(){if(!mt)throw new Error("Function called outside component initialization");return mt}function Ke(i){Di().$$.on_mount.push(i)}function ut(i){Di().$$.on_destroy.push(i)}const It=[],xe=[],xt=[],Bi=[],bs=Promise.resolve();let Qt=!1;function As(){Qt||(Qt=!0,bs.then(pe))}function yt(i){xt.push(i)}const Kt=new Set;let Ct=0;function pe(){const i=mt;do{for(;Ct<It.length;){const e=It[Ct];Ct++,vt(e),_s(e.$$)}for(vt(null),It.length=0,Ct=0;xe.length;)xe.pop()();for(let e=0;e<xt.length;e+=1){const t=xt[e];Kt.has(t)||(Kt.add(t),t())}xt.length=0}while(It.length);for(;Bi.length;)Bi.pop()();Qt=!1,Kt.clear(),vt(i)}function _s(i){if(i.fragment!==null){i.update(),Ve(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(yt)}}let bt;function Ts(){return bt||(bt=Promise.resolve(),bt.then(()=>{bt=null})),bt}function $t(i,e,t){i.dispatchEvent(ps(`${e?"intro":"outro"}${t}`))}const Ot=new Set;let Be;function Ae(){Be={r:0,c:[],p:Be}}function _e(){Be.r||Ve(Be.c),Be=Be.p}function U(i,e){i&&i.i&&(Ot.delete(i),i.i(e))}function X(i,e,t,s){if(i&&i.o){if(Ot.has(i))return;Ot.add(i),Be.c.push(()=>{Ot.delete(i),s&&(t&&i.d(1),s())}),i.o(e)}else s&&s()}const ws={duration:0};function Li(i,e,t,s){let n=e(i,t),r=s?0:1,o=null,u=null,a=null;function l(){a&&Is(i,a)}function d(I,y){const b=I.b-r;return y*=Math.abs(b),{a:r,b:I.b,d:b,duration:y,start:I.start,end:I.start+y,group:I.group}}function m(I){const{delay:y=0,duration:b=300,easing:p=ve,tick:g=W,css:A}=n||ws,Y={start:as()+y,b:I};I||(Y.group=Be,Be.r+=1),o||u?u=Y:(A&&(l(),a=Ri(i,r,I,b,y,p,A)),I&&g(0,1),o=d(Y,b),yt(()=>$t(i,I,"start")),cs(E=>{if(u&&E>u.start&&(o=d(u,b),u=null,$t(i,o.b,"start"),A&&(l(),a=Ri(i,r,o.b,o.duration,0,p,n.css))),o){if(E>=o.end)g(r=o.b,1-r),$t(i,o.b,"end"),u||(o.b?l():--o.group.r||Ve(o.group.c)),o=null;else if(E>=o.start){const P=E-o.start;r=o.a+o.d*p(P/o.duration),g(r,1-r)}}return!!(o||u)}))}return{run(I){Ci(n)?Ts().then(()=>{n=n(),m(I)}):m(I)},end(){l(),o=u=null}}}function ge(i){i&&i.c()}function ue(i,e,t,s){const{fragment:n,on_mount:r,on_destroy:o,after_update:u}=i.$$;n&&n.m(e,t),s||yt(()=>{const a=r.map(pt).filter(Ci);o?o.push(...a):Ve(a),i.$$.on_mount=[]}),u.forEach(yt)}function he(i,e){const t=i.$$;t.fragment!==null&&(Ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Es(i,e){i.$$.dirty[0]===-1&&(It.push(i),As(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function ye(i,e,t,s,n,r,o,u=[-1]){const a=mt;vt(i);const l=i.$$={fragment:null,ctx:null,props:r,update:W,not_equal:n,bound:xi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:xi(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};o&&o(l.root);let d=!1;if(l.ctx=t?t(i,e.props||{},(m,I,...y)=>{const b=y.length?y[0]:I;return l.ctx&&n(l.ctx[m],l.ctx[m]=b)&&(!l.skip_bound&&l.bound[m]&&l.bound[m](b),d&&Es(i,m)),I}):[],l.update(),d=!0,Ve(l.before_update),l.fragment=s?s(l.ctx):!1,e.target){if(e.hydrate){const m=ds(e.target);l.fragment&&l.fragment.l(m),m.forEach(q)}else l.fragment&&l.fragment.c();e.intro&&U(i.$$.fragment),ue(i,e.target,e.anchor,e.customElement),pe()}vt(a)}class be{$destroy(){he(this,1),this.$destroy=W}$on(e,t){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!ls(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Ui={};function Ss(i){return!!(i&&typeof i=="object"&&isFinite(i.length)&&i.length>=0&&i.length===Math.floor(i.length)&&i.length<4294967296)}function Ys(i){return!!(i&&typeof i=="object"&&typeof i.sort=="function")}Ui.isSortableArrayLike=function(i){return Ss(i)&&Ys(i)};var Ms={numcmp:function(i,e){return i-e},strcmp:function(i,e){return i<e?-1:i>e?1:0}},Fi={};function ei(i,e,t,s,n){var r=t+e>>>1,o=this.compare(i[r][this.index],s);return o?e>=t?n[s]={found:!1,index:null,prev:o<0?t:t-1,next:o<0?t+1:t}:o>0?ei.call(this,i,e,r-1,s,n):ei.call(this,i,r+1,t,s,n):n[s]={found:!0,index:r,prev:null,next:null}}function ks(i){var e=this.data;return ei.call(this,e,0,e.length-1,i,this.valpos)}Fi.search=ks;var Js=Ui,Gi=Ms,xs=Fi,ti=Xe;function Xe(i,e){if(!Js.isSortableArrayLike(i))throw new Error("Invalid data");if(!e||i.length>0&&!(e in i[0]))throw new Error("Invalid index");this.data=i,this.index=e,this.setBoundaries(),this.compare=typeof this.minv=="number"?Gi.numcmp:Gi.strcmp,this.search=xs.search,this.valpos={},this.cursor=null,this.nextlow=null,this.nexthigh=null}Xe.prototype.setCompare=function(i){if(typeof i!="function")throw new Error("Invalid argument");return this.compare=i,this},Xe.prototype.setSearch=function(i){if(typeof i!="function")throw new Error("Invalid argument");return this.search=i,this},Xe.prototype.sort=function(){var i=this,e=this.index;return this.data.sort(function(t,s){return i.compare(t[e],s[e])}),this.setBoundaries(),this},Xe.prototype.setBoundaries=function(){var i=this.data,e=this.index;return this.minv=i.length&&i[0][e],this.maxv=i.length&&i[i.length-1][e],this},Xe.prototype.fetch=function(i){if(this.data.length===0)return this.cursor=null,this.nextlow=null,this.nexthigh=null,this;if(this.compare(i,this.minv)===-1)return this.cursor=null,this.nextlow=null,this.nexthigh=0,this;if(this.compare(i,this.maxv)===1)return this.cursor=null,this.nextlow=this.data.length-1,this.nexthigh=null,this;var e=this.valpos,t=e[i];if(t)return t.found?(this.cursor=t.index,this.nextlow=null,this.nexthigh=null):(this.cursor=null,this.nextlow=t.prev,this.nexthigh=t.next),this;var s=this.search.call(this,i);return this.cursor=s.index,this.nextlow=s.prev,this.nexthigh=s.next,this},Xe.prototype.get=function(i){i&&this.fetch(i);var e=this.cursor;return e!==null?this.data[e]:null},Xe.prototype.getRange=function(i,e){if(this.compare(i,e)===1)return[];this.fetch(i);var t=this.cursor||this.nexthigh;this.fetch(e);var s=this.cursor||this.nextlow;return t===null||s===null?[]:this.data.slice(t,s+1)};const $e=1e3,Ce=$e*60,Cs=Ce*3,ii=Ce*5,ni=Ce*15,si=Ce*30,Te=Ce*60,Hi=Te*4,Os=Te*12,Ye=Te*24,ri=Ye*7,et=ri*4,tt=Ye*365,Ps=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ns=[tt*10,tt*5,tt*3,tt*2,tt,et*6,et*4,et*3,et*2,et,Ye*15,Ye*10,Ye*7,Ye*5,Ye*3,Ye*2,Ye,Te*12,Te*6,Te*3,Te*1.5,Te,si,ni,Ce*10,ii,Ce*2,Ce],Rs=[.05,.1,.2,.25,.5,.8,1,2,5],Ds={back:"#14151c",grid:"#252732",text:"#adadad",textHL:"#dedddd",textLG:"#c4c4c4",llValue:"#818989",llBack:"#14151c77",scale:"#606060",cross:"#8091a0",candleUp:"#41a376",candleDw:"#de4646",wickUp:"#23a77688",wickDw:"#e5415088",volUp:"#41a37682",volDw:"#de464682",panel:"#2a2f38",tbBack:void 0,tbBorder:"#8282827d"},Vi={SBMIN:60,SBMAX:1/0,TOOLBAR:57,TB_ICON:25,TB_ITEM_M:6,TB_ICON_BRI:1,TB_ICON_HOLD:420,TB_BORDER:1,TB_B_STYLE:"dotted",TOOL_COLL:7,EXPAND:.15,CANDLEW:.7,GRIDX:100,GRIDY:47,BOTBAR:28,PANHEIGHT:22,DEFAULT_LEN:50,MINIMUM_LEN:5,MIN_ZOOM:2,MAX_ZOOM:5e3,VOLSCALE:.15,UX_OPACITY:.9,ZOOM_MODE:"tv",L_BTN_SIZE:21,L_BTN_MARGIN:"-6px 0 -6px 0",SCROLL_WHEEL:"prevent",QUANTIZE_AFTER:0,AUTO_PRE_SAMPLE:10};Vi.FONT=`11px -apple-system,BlinkMacSystemFont,
    Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,
    Fira Sans,Droid Sans,Helvetica Neue,
    sans-serif`;const Bs="When using IB mode you should specify timeframe ('tf' filed in 'chart' object),otherwise you can get an unexpected behaviour",Ls={"1s":$e,"5s":$e*5,"10s":$e*10,"20s":$e*20,"30s":$e*30,"1m":Ce,"3m":Cs,"5m":ii,"15m":ni,"30m":si,"1H":Te,"2H":Te*2,"3H":Te*3,"4H":Hi,"12H":Os,"1D":Ye,"1W":ri,"1M":et,"1Y":tt},Le={SECOND:$e,MINUTE:Ce,MINUTE5:ii,MINUTE15:ni,MINUTE30:si,HOUR:Te,HOUR4:Hi,DAY:Ye,WEEK:ri,MONTH:et,YEAR:tt,MONTHMAP:Ps,TIMESCALES:Ns,$SCALES:Rs,ChartConfig:Vi,MAP_UNIT:Ls,IB_TF_WARN:Bs,COLORS:Ds},N={clamp(i,e,t){return i<=e?e:i>=t?t:i},addZero(i){return i<10&&(i="0"+i),i},dayStart(i){return new Date(i).setUTCHours(0,0,0,0)},monthStart(i){let e=new Date(i);return Date.UTC(e.getFullYear(),e.getMonth(),1)},yearStart(i){return Date.UTC(new Date(i).getFullYear())},getYear(i){if(!!i)return new Date(i).getUTCFullYear()},getMonth(i){if(!!i)return new Date(i).getUTCMonth()},nearestA(i,e){let t=1/0,s=null,n=-1;for(var r=0;r<e.length;r++){var o=e[r];Math.abs(o-i)<t&&(t=Math.abs(o-i),s=o,n=r)}return[n,s]},nearestTs(i,e){let t=1/0,s=null,n=-1;for(var r=0;r<e.length;r++){var o=e[r][0];Math.abs(o-i)<t&&(t=Math.abs(o-i),s=e[r],n=r)}return[n,s]},round(i,e=8){return parseFloat(i.toFixed(e))},strip(i){return parseFloat(parseFloat(i).toPrecision(12))},getDay(i){return i?new Date(i).getDate():null},overwrite(i,e){i.splice(0,i.length,...e)},allOverlays(i=[]){return i.map(e=>e.overlays||[]).flat()},detectInterval(i){let e=Math.min(i.length-1,99),t=1/0;return i.slice(0,e).forEach((s,n)=>{let r=i[n+1][0]-s[0];r===r&&r<t&&(t=r)}),t>=Le.MONTH&&t<=Le.DAY*30?Le.DAY*31:t},fastFilter(i,e,t){if(!i.length)return[i,void 0];try{let s=new ti(i,"0"),n=s.getRange(e,t),r=s.valpos[e].next;return[n,r]}catch(s){return[i.filter(n=>n[0]>=e&&n[0]<=t),0]}},fastFilter2(i,e,t){if(!i.length)return[i,void 0];try{let s=new ti(i,"0");s.fetch(e);let n=s.cursor||s.nexthigh;s.fetch(t);let r=s.cursor||s.nextlow;return[n,r+1]}catch(s){let n=i.filter(u=>u[0]>=e&&u[0]<=t),r=i.indexOf(n[0]),o=i.indexOf(n[n.length-1]);return[r,o]}},fastFilterIB(i,e,t){if(!i.length)return[i,void 0];let s=Math.floor(e);s<0&&(s=0);let n=Math.floor(t+1);return[i.slice(s,n),s]},fastNearest(i,e){let t=new ti(i,"0");return t.fetch(e),[t.nextlow,t.nexthigh]},now(){return new Date().getTime()},pause(i){return new Promise((e,t)=>setTimeout(e,i))},smartWheel(i){let e=Math.abs(i);return e>500?(200+Math.log(e))*Math.sign(i):i},getDeltaX(i){return i.originalEvent.deltaX/12},getDeltaY(i){return i.originalEvent.deltaY/12},applyOpacity(i,e){if(i.length===7){let t=Math.floor(e*255);t=this.clamp(t,0,255),i+=t.toString(16)}return i},parseTF(i){return typeof i=="string"?Le.MAP_UNIT[i]:i},indexShift(i,e){if(!e.length)return 0;let t=e[0][0],s;for(var n=1;n<e.length;n++)if(e[n][0]!==t){s=e[n][0];break}for(var r=0;r<i.length;r++)if(i[r][0]===s)return r-n;return 0},measureText(i,e,t){let s=i.measureTextOrg(e);if(s.width===0){const n=document,r="nvjs-measure-text";let o=n.getElementById(r);if(!o){let u=n.getElementById(t);o=n.createElement("div"),o.id=r,o.style.position="absolute",o.style.top="-1000px",u.appendChild(o)}return i.font&&(o.style.font=i.font),o.innerText=e.replace(/ /g,"."),{width:o.offsetWidth}}else return s},uuid(i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"){return i.replace(/[xy]/g,e=>{var t=Math.random()*16|0,s=e=="x"?t:t&3|8;return s.toString(16)})},uuid2(){return this.uuid("xxxxxxxxxxxx")},uuid3(){return Math.random().toString().slice(2).replace(/^0+/,"")},warn(i,e,t=0){setTimeout(()=>{i()&&console.warn(e)},t)},delayedExec(i){if(!i.script||!i.script.execInterval)return!0;let e=this.now(),t=i.script.execInterval;return!i.settings.$last_exec||e>i.settings.$last_exec+t?(i.settings.$last_exec=e,!0):!1},formatName(i){if(!i.name)return;let e=i.name;for(var t in i.settings||{}){let s=i.settings[t],n=new RegExp(`\\$${t}`,"g");e=e.replace(n,s)}return e},xMode(){return this.is_mobile?"explore":"default"},defaultPrevented(i){return i.original?i.original.defaultPrevented:i.defaultPrevented},afterAll(i,e,t){clearTimeout(i.__afterAllId__),i.__afterAllId__=setTimeout(()=>e(),t)},defaultPreSampler(i){if(!i)return[];let e=[];for(var t=1;t<i.length;t++)typeof i[t]=="number"&&e.push(i[t]);return e},getScalesBySide(i,e){return e?e.settings.scaleTemplate[i].map(s=>e.scales[s]).filter(s=>s):[]},autoScaleSideId(i,e,t){e[i].length?(!t[i]||!e[i].includes(t[i]))&&(t[i]=e[i][0]):t[i]=void 0},callsPerSecond(){window.__counter__===void 0&&(window.__counter__=0),window.__counter__++,!window.__cpsId__&&(window.__cpsId__=setTimeout(()=>{console.log(window.__counter__,"upd/sec"),window.__counter__=0,window.__cpsId__=null},1e3))},formatCash(i){if(i==null)return"x";if(typeof i!="number")return i;if(i<1e3)return i.toFixed(0);if(i>=1e3&&i<1e6)return+(i/1e3).toFixed(2)+"K";if(i>=1e6&&i<1e9)return+(i/1e6).toFixed(2)+"M";if(i>=1e9&&i<1e12)return+(i/1e9).toFixed(2)+"B";if(i>=1e12)return+(i/1e12).toFixed(2)+"T"},isMobile:(i=>"onorientationchange"in i&&(!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||"ontouchstart"in i||i.DocumentTouch&&document instanceof i.DocumentTouch))(typeof window!="undefined"?window:{})},te={point2line(i,e,t){let{area:s,base:n}=this.tri(i,e,t);return Math.abs(this.tri_h(s,n))},point2seg(i,e,t){let{area:s,base:n}=this.tri(i,e,t),r=this.dot_prod(i,e,t)/n,o=Math.max(-r,0),u=Math.max(r-n,0),a=Math.abs(this.tri_h(s,n));return Math.max(a,o,u)},point2ray(i,e,t){let{area:s,base:n}=this.tri(i,e,t),r=this.dot_prod(i,e,t)/n,o=Math.max(-r,0),u=Math.abs(this.tri_h(s,n));return Math.max(u,o)},tri(i,e,t){let s=this.area(i,e,t),n=t[0]-e[0],r=t[1]-e[1],o=Math.sqrt(n*n+r*r);return{area:s,base:o}},area(i,e,t){return i[0]*(e[1]-t[1])+e[0]*(t[1]-i[1])+t[0]*(i[1]-e[1])},tri_h(i,e){return i/e},dot_prod(i,e,t){let s=[t[0]-e[0],t[1]-e[1]],n=[i[0]-e[0],i[1]-e[1]];return s[0]*n[0]+s[1]*n[1]},log(i){return Math.sign(i)*Math.log(Math.abs(i)+1)},exp(i){return Math.sign(i)*(Math.exp(Math.abs(i))-1)},log_mid(i,e){let t=this.log(i[0]),s=this.log(i[1]),n=e/2,r=t-n*(t-s)/e;return this.exp(r)},re_range(i,e,t){let s=this.log(i[0]),n=this.log(i[1]),r=this.log(e),o=this.log(t),u=(r-o)*(s-n)/(s-o);return this.exp(r-u)}};class Us{constructor(){}xSync(e,t,s,n){if(n.visible===!1)return this.hide(),this;let r=this.t;Object.assign(this,n);let o=t.main.startx,u=t.main.pxStep;return this.yValues(t),this.locked?(this.x=t.main.time2x(r),this):(this.x=Math.round((this.x-o)/u)*u+o,this.x=Math.floor(this.x-1)+.5,this.xValues(e,t,s))}xValues(e,t,s){this.locked||(this.t=t.main.x2time(this.x));let n=[];for(var r of e.panes()){let u=[];for(var o=0;o<r.overlays.length;o++){let a=r.overlays[o];u.push(N.nearestTs(this.t,a.dataSubset)[1])}n.push(u)}return this.values=n,this.quantizeTime(e,t,s),this}yValues(e){let t=this.gridId;if(!e.grids[t])return;this.scales={};let s=e.grids[t];for(var n of Object.values(s.scales)){let r=this.y2value(this.y,n);this.scales[n.scaleSpecs.id]=r}}quantizeTime(e,t,s){let n=e.chart.id,r=e.mainOv.id;if(!this.values||!this.values[n])return;let o=this.values[n][r];if(!o)return;if(Math.abs((o[0]-this.t)/s.interval)>=.5){let a=Math.round(this.t/s.interval);this.t=a*s.interval}else this.t=o[0]}y2value(e,t){return t.scaleSpecs.log?te.exp((e-t.B)/t.A):(e-t.B)/t.A}getValue(e,t){return this.values?(this.values[e]||[])[t]:void 0}hide(){this.visible=!1,delete this.scales,delete this.x,delete this.y,this.locked||delete this.t}}class Fs{constructor(){this.handlers={}}emit(e,t){let s=this.handlers[e];if(!!s)for(var n in s)s[n](t)}emitSpec(e,t,s){let n=this.handlers[t];!n||!n[e]||n[e](s)}on(e,t){let[s,n]=e.split(":");this.handlers[n]||(this.handlers[n]={}),this.handlers[n][s]=t}off(e,t=null){if(t&&this.handlers[t]){delete this.handlers[t][e];return}for(var t in this.handlers)delete this.handlers[t][e]}}let oi={};function Gs(i){return oi[i]||(oi[i]=new Fs(i)),oi[i]}const le={instance:Gs};class Hs{constructor(e,t,s){this.src=e,this.i1=Math.max(0,t-1),this.i2=Math.min(s,e.length-1),this.length=this.i2-this.i1+1}makeSubset(){return this.src.slice(this.i1,this.i2+1)}}class Vs{constructor(e){ki(this,it,void 0);let t=le.instance(e);Ji(this,it,t),t.on("hub:set-scale-index",this.onScaleIndex.bind(this)),t.on("hub:display-overlay",this.onDisplayOv.bind(this))}init(e){this.data=e,this.chart=null,this.offchart=null,this.mainOv=null,this.mainPaneId=null}updateRange(e){for(var t of this.data.panes)for(var s of t.overlays)s.dataView=this.filter(s.data,e),s.dataSubset=s.dataView.makeSubset()}calcSubset(e){var t=0;for(var s of this.data.panes||[]){s.id=t++,s.overlays=s.overlays||[],s.settings=s.settings||{};var n=0;for(var r of s.overlays)r.id=n++,r.main=!!r.main,r.data=r.data||[],r.dataView=this.filter(r.data,e),r.dataSubset=r.dataView.makeSubset(),r.settings=r.settings||{},r.props=r.props||{},r.uuid=r.uuid||N.uuid3();s.uuid=s.uuid||N.uuid3()}}detectMain(){let e=N.allOverlays(this.data.panes),t=e.find(n=>n.main)||e[0];if(!(!e.length||!t)){t.main=!0,this.chart=this.data.panes.find(n=>n.overlays.find(r=>r.main)),this.offchart=this.data.panes.filter(n=>n!==this.chart),this.mainOv=t,this.mainPaneId=this.panes().indexOf(this.chart);for(var s of e)s!==t&&(s.main=!1)}}filter(e,t){var s=N.fastFilter2(e,t[0],t[1]);return new Hs(e,s[0],s[1])}panes(){return(this.data.panes||[]).filter(e=>e.uuid)}overlay(e,t){var s;return(s=this.panes()[e])==null?void 0:s.overlays[t]}ovData(e,t){var s,n;return(n=(s=this.panes()[e])==null?void 0:s.overlays[t])==null?void 0:n.data}ovDataSubset(e,t){var s,n;return(n=(s=this.panes()[e])==null?void 0:s.overlays[t])==null?void 0:n.dataSubset}allOverlays(){return N.allOverlays(this.data.panes)}onScaleIndex(e){let t=this.panes()[e.paneId];!t||(t.settings.scaleIndex=e.index,t.settings.scaleSideIdxs=e.sideIdxs,lt(this,it).emitSpec("chart","update-layout"))}onDisplayOv(e){let t=this.panes()[e.paneId];if(!t)return;let s=t.overlays[e.ovId];if(!s)return;s.settings.display=e.flag;let n=`${e.paneId}-${e.ovId}`;lt(this,it).emitSpec("chart","update-layout"),lt(this,it).emitSpec(`ll-${n}`,"update-ll")}}it=new WeakMap;let li={};function Xs(i){return li[i]||(li[i]=new Vs(i)),li[i]}const Oe={instance:Xs};class js{constructor(e){ki(this,nt,void 0);let t=le.instance(e);this.hub=Oe.instance(e),Ji(this,nt,t),t.on("meta:sidebar-transform",this.onYTransform.bind(this)),this.storage={}}init(e){this.panes=0,this.legendFns=[],this.yTransforms=[],this.preSamplers=[],this.yRangeFns=[],this.autoPrecisions=[],this.valueTrackers=[]}exctractFrom(e){let t=e.gridId(),s=e.id();var n=this.yRangeFns[t]||[];n[s]=e.yRange?{exec:e.yRange,preCalc:e.yRangePreCalc}:null;var r=this.preSamplers[t]||[];r[s]=e.preSampler;var o=this.legendFns[t]||[];o[s]={legend:e.legend,legendHtml:e.legendHtml};var u=this.valueTrackers[t]||[];u[s]=e.valueTracker,this.yRangeFns[t]=n,this.preSamplers[t]=r,this.legendFns[t]=o,this.valueTrackers[t]=u}onYTransform(e){let t=this.yTransforms[e.gridId]||{},s=t[e.scaleId]||{};t[e.scaleId]=Object.assign(s,e),this.yTransforms[e.gridId]=t,e.updateLayout&&lt(this,nt).emitSpec("chart","update-layout")}getYtransform(e,t){return(this.yTransforms[e]||[])[t]}storeAutoPrec(e,t,s){let n=this.autoPrecisions[e]||[];n[t]=s,this.autoPrecisions[e]=n}getAutoPrec(e,t){return(this.autoPrecisions[e]||[])[t]}getPreSampler(e,t){return(this.preSamplers[e]||[])[t]}getLegendFns(e,t){return(this.legendFns[e]||[])[t]}finish(){this.panes++,!(this.panes<this.hub.panes().length)&&(this.autoPrecisions=[],this.restore(),setTimeout(()=>{lt(this,nt).emitSpec("chart","update-layout"),lt(this,nt).emit("update-legend")}))}store(){this.storage={};let e=this.yTransforms||[];for(var t in e)for(var s in e[t]||[]){if(!e[t][s])continue;let n=this.hub.panes()[t];if(!n)continue;let r=n.overlays[s];if(!r)continue;let o=`${n.uuid}:${r.uuid}`;this.storage[o]=e[t][s]}}restore(){let e=this.yTransforms;for(var t in this.storage){let[s,n]=t.split(":"),r=this.hub.panes().find(u=>u.uuid===s);if(!r)continue;let o=r.overlays.find(u=>u.uuid===n);!o||(e[r.id]=[],e[r.id][o.id]=this.storage[t])}this.storage={}}}nt=new WeakMap;let ai={};function zs(i){return ai[i]||(ai[i]=new js(i)),ai[i]}const Pe={instance:zs};class qs{constructor(){}init(e){this.props=e,this.hub=Oe.instance(e.id)}detectInterval(){let e=N.allOverlays(this.hub.data.panes);e.filter(s=>s.main).length>1&&console.warn("Two or more overlays with flagged as 'main'");let t=e.find(s=>s.main)||e[0];return this.main=(t||{}).data||[],this.interval=N.detectInterval(this.main),this.interval}defaultRange(){const e=this.props.config.DEFAULT_LEN,t=this.props.config.MINIMUM_LEN+.5,s=this.main.length-1;if(this.main.length<2)return[];if(this.main.length<=e)var n=0,r=t;else n=s-e,r=.5;return this.props.indexBased?[n-this.interval*r,s+this.interval*t]:[this.main[n][0]-this.interval*r,this.main[s][0]+this.interval*t]}calcPanesHash(){let e="";for(var t of this.hub.data.panes||[]){e+=t.uuid;for(var s of t.overlays||[])e+=s.uuid}return e}panesChanged(){return this.calcPanesHash()!==this.panesHash}updatePanesHash(){this.panesHash=this.calcPanesHash()}}let ci={};function Ws(i){return ci[i]||(ci[i]=new qs(i)),ci[i]}const Pt={instance:Ws};function Xi(i,e){const t=e[1]-e[0],s=i.spacex/t,n=(i.scaleSpecs||{}).log||!1;return Object.assign(i,{ti2x:(r,o)=>{},time2x:r=>Math.floor((r-e[0])*s)-.5,value2y:r=>(n&&(r=te.log(r)),Math.floor(r*i.A+i.B)-.5),tMagnet:r=>{},y2value:r=>n?te.exp((r-i.B)/i.A):(r-i.B)/i.A,x2time:r=>e[0]+r/s,x2ti:r=>{},$magnet:r=>{},cMagnet:r=>{const o=i.candles||i.master_grid.candles,u=o.map(l=>l.raw[0]),a=N.nearestA(r,u)[0];return o[a]},dataMagnet:r=>{}}),i}const ji={candle(i,e,t,s){return{x:e,w:i.pxStep*s.config.CANDLEW,o:Math.floor(te.log(t[1])*i.A+i.B),h:Math.floor(te.log(t[2])*i.A+i.B),l:Math.floor(te.log(t[3])*i.A+i.B),c:Math.floor(te.log(t[4])*i.A+i.B),raw:t}},expand(i,e){let t=-e/(te.log(i.$hi)-te.log(i.$lo)),s=-te.log(i.$hi)*t,n=-e*.1,r=e*1.1;i.$hi=te.exp((n-s)/t),i.$lo=te.exp((r-s)/t)}},{$SCALES:Zs}=Le;function Qs(i,e,t){let{hub:s,props:n,settings:r,height:o}=t,{ctx:u}=n,a=Pe.instance(n.id),l={},d=(a.yTransforms[e.gridId]||[])[i],m=e.gridId,I=e.ovs,y=e.log;const b=n.config.AUTO_PRE_SAMPLE;function p(){if(Math.max(...I.map(z=>z.dataSubset.length))<2){l.prec=0,l.sb=n.config.SBMIN;return}if(e.precision!==void 0)l.prec=e.precision;else{l.prec=0;for(var _ of I){if("precision"in _.settings)var T=_.settings.precision;else var T=A(_);T>l.prec&&(l.prec=T)}}if(!isFinite(l.$hi)||!isFinite(l.$lo)){l.sb=n.config.SBMIN;return}let w=[];w.push(l.$hi.toFixed(l.prec).length),w.push(l.$lo.toFixed(l.prec).length);let B="0".repeat(Math.max(...w))+"    ";l.sb=u.measureText(B).width,l.sb=Math.max(Math.floor(l.sb),n.config.SBMIN),l.sb=Math.min(l.sb,n.config.SBMAX)}function g(){var k=-1/0,_=1/0;for(var T of I){if(T.settings.display===!1)continue;let ne=(a.yRangeFns[m]||[])[T.id],Me=T.dataSubset;var w=-1/0,B=1/0;if(!ne||ne&&ne.preCalc)for(var z=0;z<Me.length;z++)for(var V=1;V<Me[z].length;V++){let ae=Me[z][V];ae>w&&(w=ae),ae<B&&(B=ae)}if(ne)var[w,B,$]=ne.exec(w,B);w>k&&(k=w),B<_&&(_=B)}d&&!d.auto&&d.range?(l.$hi=d.range[0],l.$lo=d.range[1]):(y?(l.$hi=k,l.$lo=_,ji.expand(l,o)):($=$===!1?0:1,l.$hi=k+(k-_)*n.config.EXPAND*$,l.$lo=_-(k-_)*n.config.EXPAND*$),l.$hi===l.$lo&&(y?ji.expand(l,o):(l.$hi*=1.05,l.$lo*=.95)))}function A(k){let _=0,T=[],w=a.getPreSampler(m,k.id);w=w||N.defaultPreSampler;for(var B=0;B<b;B++){let V=Math.floor(Math.random()*k.dataSubset.length),$=w(k.dataSubset[V]);typeof $=="number"?T.push($):T=T.concat($)}T.forEach(V=>{var $=V!=null?V.toString():"";if(V<1e-6){var[ne,Me]=$.split("e-"),[ae,G]=ne.split(".");G||(G=""),G={length:G.length+parseInt(Me)||0}}else var[ae,G]=$.split(".");G&&G.length>_&&(_=G.length)});let z=a.getAutoPrec(m,k.id);return z===void 0||_>z?(a.storeAutoPrec(m,k.id,_),_):z}function Y(){y?(l.A=-o/(te.log(l.$hi)-te.log(l.$lo)),l.B=-te.log(l.$hi)*l.A):(l.A=-o/(l.$hi-l.$lo),l.B=-l.$hi*l.A)}function E(){let k=l.$hi-l.$lo,_=k*(n.config.GRIDY/o),T=parseInt(k.toExponential().split("e")[1]),w=Math.pow(10,T),B=Zs.map(z=>z*w);return N.strip(N.nearestA(_,B)[1])}function P(){let k=L(),_=F();return Math.max(k,_)}function L(){let k=Math.min(l.B,o);if(k<n.config.GRIDY)return 1;let _=k/n.config.GRIDY,T=l.$hi;if(l.$lo>0)var w=l.$hi/l.$lo;else w=l.$hi/1;return T*(n.config.GRIDY/k),parseInt(T.toExponential().split("e")[1]),Math.pow(w,1/_)}function F(){let k=Math.min(o-l.B,o);if(k<n.config.GRIDY)return 1;let _=k/n.config.GRIDY,T=Math.abs(l.$lo);if(l.$hi<0&&l.$lo<0)var w=Math.abs(l.$lo/l.$hi);else w=Math.abs(l.$lo)/1;return T*(n.config.GRIDY/k),parseInt(T.toExponential().split("e")[1]),Math.pow(w,1/_)}function M(){let k=Math.pow(10,-l.prec);l.$step=Math.max(k,E()),l.ys=[];let _=l.$lo-l.$lo%l.$step;for(var T=_;T<=l.$hi;T+=l.$step){let w=Math.floor(T*l.A+l.B);w>o||l.ys.push([w,N.strip(T)])}}function R(){if(l.$_mult=P(),l.ys=[],!data.length)return;let k=Math.abs(data[data.length-1][1]||1),_=O(k),T=J(-k),w=-1/0,B=o/n.config.GRIDY,z=1+(l.$_mult-1)/2;for(var V=_;V>0;V/=l.$_mult){V=H(V,z);let $=Math.floor(te.log(V)*l.A+l.B);if(l.ys.push([$,N.strip(V)]),$>o||$-w<n.config.GRIDY*.7||l.ys.length>B+1)break;w=$}w=1/0;for(var V=T;V<0;V/=l.$_mult){V=H(V,z);let ne=Math.floor(te.log(V)*l.A+l.B);if(w-ne<n.config.GRIDY*.7||(l.ys.push([ne,N.strip(V)]),ne<0)||l.ys.length>B*3+1)break;w=ne}}function O(k){let _=o/n.config.GRIDY;for(var T=1/0,w=k,B=0;T>0;)if(T=Math.floor(te.log(w)*l.A+l.B),w*=l.$_mult,B++>_*3)return 0;return w}function J(k){let _=o/n.config.GRIDY;for(var T=-1/0,w=k,B=0;T<o&&(T=Math.floor(te.log(w)*l.A+l.B),w*=l.$_mult,!(B++>_*3)););return w}function H(k,_){let T=Math.sign(k);if(k=Math.abs(k),k>10){for(var w=10;w<MAX_INT;w*=10){let z=Math.floor(k/w)*w;if(k/z>_)break}return w/=10,T*Math.floor(k/w)*w}else if(k<1){for(var B=10;B>=1;B--){let z=N.round(k,B);if(k/z>_)break}return T*N.round(k,B+1)}else return T*Math.floor(k)}return g(),p(),Y(),y?R():M(),l.scaleSpecs={id:i,log:e.log,ovIdxs:e.ovIdxs},l.height=o,l}const{TIMESCALES:Ks,$SCALES:Cl,WEEK:$s,MONTH:er,YEAR:zi,HOUR:qi,DAY:Wi}=Le;function Zi(i,e,t=null){let{hub:s,props:n,settings:r,height:o}=e,{interval:u,range:a,ctx:l,timezone:d}=n,m={},I=!!r.logScale,y=s.panes()[i].overlays,b=s.mainOv.dataSubset,p={tiMap:m};function g(){let _=A();for(var T=0;T<y.length;T++){let w=y[T],B=w.settings.scale||"A";_[B]||(_[B]=Y(B)),_[B].ovs.push(w),_[B].ovIdxs.push(T)}return Object.values(_)}function A(){let _={A:Y("A")};for(var T in r.scales||{}){let w=r.scales[T];_[T]=Y(T,w)}return _}function Y(_,T={}){var w;return{id:_,gridId:i,ovs:[],ovIdxs:[],log:(w=T.log)!=null?w:I,precision:T.precision}}function E(){if(b.length<2)return;let _=a[1]-a[0];p.spacex=n.width-p.sbMax[0]-p.sbMax[1];let T=_/u;p.pxStep=p.spacex/T;let w=p.spacex/_;p.startx=(b[0][0]-a[0])*w}function P(){let _=m.ib?6e4:1,w=(a[1]-a[0])*_*(n.config.GRIDX/n.width),B=Ks;return N.nearestA(w,B)[1]/_}function L(){if(t)p.tStep=t.tStep,p.pxStep=t.pxStep,p.startx=t.startx,p.spacex=t.spacex,p.xs=t.xs;else{E(),p.tStep=P(),p.xs=[];const T=a[1]-a[0],w=p.spacex/T;for(var _=0;_<b.length;_++){let B=b[_],z=b[_-1]||[],V=p.xs[p.xs.length-1]||[0,[]],$=Math.floor((B[0]-a[0])*w);F(z,B,$);let ne=p.xs[p.xs.length-1]||[0,[]];V!==ne&&ne[1][0]-V[1][0]<p.tStep*.8&&(ne[2]<=V[2]?p.xs.pop():p.xs.splice(p.xs.length-2,1))}u<$s&&w>0&&(M(T,w),R(T,w))}}function F(_,T,w,B){let z=m.ib?m.i2t(_[0]):_[0],V=m.ib?m.i2t(T[0]):T[0];m.tf<Wi&&(z+=d*qi,V+=d*qi),(_[0]||u===zi)&&N.getYear(V)!==N.getYear(z)?p.xs.push([w,T,zi]):_[0]&&N.getMonth(V)!==N.getMonth(z)?p.xs.push([w,T,er]):N.dayStart(V)===V?p.xs.push([w,T,Wi]):T[0]%p.tStep===0&&p.xs.push([w,T,u])}function M(_,T){if(!p.xs.length||!isFinite(T))return;let w=p.xs[0][1][0];for(;;){w-=p.tStep;let B=Math.floor((w-a[0])*T);if(B<0)break;w%u===0&&p.xs.unshift([B,[w],u])}}function R(_,T){if(!p.xs.length||!isFinite(T))return;let w=p.xs[p.xs.length-1][1][0];for(;;){w+=p.tStep;let B=Math.floor((w-a[0])*T);if(B>p.spacex)break;w%u===0&&p.xs.push([B,[w],u])}}function O(){p.width=n.width-p.sbMax[0]-p.sbMax[1],p.height=o}function J(){let _={};for(var T of g()){let w=new Qs(T.id,T,e);_[T.id]=w}p.scales=_}function H(){p.scales[r.scaleIndex]||(r.scaleIndex="A"),p.scaleIndex=r.scaleIndex,r.scaleTemplate||(r.scaleTemplate=[[],Object.keys(p.scales)]);let _=r.scaleTemplate;(!_[0]||!_[1])&&console.error("Define scaleTemplate as [[],[]]"),r.scaleSideIdxs||(r.scaleSideIdxs=[]);let T=r.scaleSideIdxs;N.autoScaleSideId(0,_,T),N.autoScaleSideId(1,_,T),p.sb=[];let w=_[0].includes(T[0])?T[0]:null;p.sb.push(p.scales[w]?p.scales[w].sb:0);let B=_[1].includes(T[1])?T[1]:null;p.sb.push(p.scales[B]?p.scales[B].sb:0)}function k(){let _=p.sb;Object.assign(p,p.scales[p.scaleIndex]),p.sb=_,p.ys=p.ys||[]}return J(),H(),{create:()=>(L(),O(),t&&(p.mainGrid=t),p.settings=r,p.main=!t,p.id=i,k(),Xi(p,a)),getLayout:()=>p,setMaxSidebar:_=>p.sbMax=_,getSidebar:()=>p.sb,id:()=>i}}function Qi(i,e){let t=e.chart,s=e.offchart,n=e.panes().filter(g=>g.settings);if(!t)return{};function r(){const g=i.height-i.config.BOTBAR;if(n.find(F=>F.settings.height))return o(g);const A=s.length,Y=2*Math.sqrt(A)/7/(A||1),E=Math.floor(g*Y),P=g-E*A;let L=Array(A+1).fill(E);return L[e.mainPaneId]=P,L}function o(g){let A=e.panes().map(P=>{var L;return(L=P.settings.height)!=null?L:1}),Y=A.reduce((P,L)=>P+L,0);A=A.map(P=>Math.floor(P/Y*g)),Y=A.reduce((P,L)=>P+L,0);for(var E=0;E<g-Y;E++)A[E%A.length]++;return A}const u=r();let a=g=>({hub:e,props:i,settings:n[g].settings,height:u[g]}),l=new Zi(e.mainPaneId,a(e.mainPaneId)),d=[l];for(var[m,I]of n.entries())m!==e.mainPaneId&&d.push(new Zi(m,a(m),l.getLayout()));let y=[Math.max(...d.map(g=>g.getSidebar()[0])),Math.max(...d.map(g=>g.getSidebar()[1]))],b=[],p=0;for(var m=0;m<d.length;m++){let A=d[m].id();d[m].setMaxSidebar(y),b[A]=d[m].create()}for(var m=0;m<b.length;m++)b[m].offset=p,p+=b[m].height;return{grids:b,main:b.find(g=>g.main),botbar:{width:i.width,height:i.config.BOTBAR,offset:p,xs:b[0]?b[0].xs:[]}}}function tr(i){let t=document.createElement("canvas").getContext("2d");return t.font=i.config.FONT,t}const ir=Object.freeze(Object.defineProperty({__proto__:null,default:`
// NavyJS ~ 0.1-lite

[OVERLAY name=Area, ctx=Canvas, author=ChartMaster, version=1.0.0]

// Define new props
prop('color', { type: 'Color', def: '#31ce31' })
prop('lineWidth', { type: 'Integer', def: 1.25 })
prop('back1', { type: 'Color', def: $props.color + '15' })
prop('back2', { type: 'Color', def: $props.color + '01' })

draw(ctx) {

    const layout = $core.layout
    const data = $core.data // Full dataset
    const view = $core.view // Visible view
    const grd = ctx.createLinearGradient(0, 0, 0, layout.height)
    grd.addColorStop(0, $props.back1)
    grd.addColorStop(1, $props.back2)

    // Line
    ctx.lineWidth = $props.lineWidth
    ctx.strokeStyle = $props.color
    ctx.beginPath()
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.time2x(p[0])
        let y = layout.value2y(p[1])
        ctx.lineTo(x, y)
    }
    ctx.stroke()

    // Area
    ctx.fillStyle = grd
    ctx.beginPath()
    let p0 = (data[0] || [])[0]
    let pN = (data[data.length - 1] || [])[0]
    ctx.lineTo(layout.time2x(p0), layout.height)
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.time2x(p[0])
        let y = layout.value2y(p[1])
        ctx.lineTo(x, y)
    }
    ctx.lineTo(layout.time2x(pN), layout.height)
    ctx.fill()

}

// Legend, defined as pairs [value, color]
legend(x) => [[x[1], $props.color]]
`},Symbol.toStringTag,{value:"Module"})),nr=Object.freeze(Object.defineProperty({__proto__:null,default:`
// NavyJS ~ 0.1-lite

[OVERLAY name=Candles, ctx=Canvas, author=ChartMaster, version=1.0.0]

// Define the props
prop('colorBodyUp', { type: 'Color', def: $core.colors.candleUp })
prop('colorBodyDw', { type: 'Color', def: $core.colors.candleDw })
prop('colorWickUp', { type: 'Color', def: $core.colors.wickUp })
prop('colorWickDw', { type: 'Color', def: $core.colors.wickDw })
prop('colorVolUp', { type: 'Color', def: $core.colors.volUp })
prop('colorVolDw', { type: 'Color', def: $core.colors.volDw })
prop('showVolume', { type: 'boolean', def: true })
prop('currencySymbol', { type: 'string', def: '$' })
prop('showAvgVolume', { type: 'boolean', def: true })
prop('avgVolumeSMA', { type: 'string', def: 20 })
prop('colorAvgVol', { type: 'Color', def: '#1cccb777'})
prop('scaleSymbol', { type: 'string|boolean', def: false })
prop('priceLine', { type: 'boolean', def: true })
prop('showValueTracker', { type: 'boolean', def: true })


// Draw call
draw(ctx) {

    let cnv = $lib.layoutCnv($core, true, $props.showVolume)
    if (!cnv.upBodies.length) return
    let w = Math.max(cnv.upBodies[0].w, 1)

    drawCvPart(ctx, $lib.candleWick, cnv.dwWicks, 1, 'colorWickDw')
    drawCvPart(ctx, $lib.candleWick, cnv.upWicks, 1, 'colorWickUp')
    drawCvPart(ctx, $lib.candleBody, cnv.dwBodies, w, 'colorBodyDw')
    drawCvPart(ctx, $lib.candleBody, cnv.upBodies, w, 'colorBodyUp')
    drawCvPart(ctx, $lib.volumeBar, cnv.dwVolbars, w, 'colorVolDw')
    drawCvPart(ctx, $lib.volumeBar, cnv.upVolbars, w, 'colorVolUp')

    if ($props.showAvgVolume) $lib.avgVolume(ctx, $core, $props, cnv)

}

// Draw candle part
drawCvPart(ctx, f, arr, w, color) {
    let layout = $core.layout
    ctx.lineWidth = w
    ctx.strokeStyle = $props[color]
    ctx.beginPath()
    for (var i = 0, n = arr.length; i < n; i++) {
        f(ctx, arr[i], layout)
    }
    ctx.stroke()
}

// Define y-range (by finding max High, min Low)
yRange() {
    // Getting updated data faster
    // (we need 1 more update when using $core.dataSubset)
    let data = $core.hub.ovDataSubset($core.paneId, $core.id)
    let len = data.length
    var h, l, high = -Infinity, low = Infinity
    for(var i = 0; i < len; i++) {
        let point = data[i]
        if (point[2] > high) high = point[2]
        if (point[3] < low) low = point[3]
    }
    return [high, low]
}

// Use [Open, Close] for precision detection
preSampler(x) => [x[1], x[4]]

// Price label + Scale symbol + price line
valueTracker(x) => {
    show: $props.showValueTracker,
    symbol: $props.scaleSymbol,
    line: $props.priceLine,
    color: $lib.candleColor($props, $core.data[$core.data.length - 1]),
    value: x[4] // close
}

// Define the OHLCV legend
legendHtml(x, prec, f) {
    let color1 = $core.colors.text
    let v = $core.cursor.getValue($core.paneId, $core.id)
    let sym = $props.currencySymbol
    let color2 = v[4] >= v[1] ?
        $props.colorBodyUp : $props.colorBodyDw
    let fc = $lib.formatCash
    return \`
    <span style="color: \${color2}">
        <span style="margin-left: 3px;"></span>
        <span style="color: \${color1}">O</span>
        <span class="nvjs-ll-value">\${f(x[1])}</span>
        <span style="color: \${color1}">H</span>
        <span class="nvjs-ll-value">\${f(x[2])}</span>
        <span style="color: \${color1}">L</span>
        <span class="nvjs-ll-value">\${f(x[3])}</span>
        <span style="color: \${color1}">C</span>
        <span class="nvjs-ll-value">\${f(x[4])}</span>
        <span style="color: \${color1}">V</span>
        <span class="nvjs-ll-value">\${sym+fc(x[5])}</span>
    <span>
    \`
}
`},Symbol.toStringTag,{value:"Module"})),sr=Object.freeze(Object.defineProperty({__proto__:null,default:`
// NavyJS ~ 0.1-lite

[OVERLAY name=Spline, ctx=Canvas, author=ChartMaster, version=1.0.0]

// Define new props
prop('color', { type: 'Color', def: '#31ce31' })
prop('lineWidth', { type: 'Integer', def: 1 })
prop('dataIndex', { type: 'Integer', def: 1 })


draw(ctx) {
    ctx.lineWidth = $props.lineWidth
    ctx.lineJoin = "round"
    ctx.strokeStyle = $props.color
    ctx.beginPath()
    const layout = $core.layout
    const data = $core.data // Full dataset
    const view = $core.view // Visible view
    const idx = $props.dataIndex
    for (var i = view.i1, n = view.i2; i <= n; i++) {
        let p = data[i]
        let x = layout.time2x(p[0])
        let y = layout.value2y(p[idx])
        ctx.lineTo(x, y)
    }
    ctx.stroke()
}

// Price label + Scale symbol + price line
/*valueTracker(x) => {
    show: true,
    symbol: $core.src.name,
    line: true,
    color: $props.color,
    value: x[$props.dataIndex]
}*/

// Legend, defined as pairs [value, color]
legend(x) => [[x[$props.dataIndex], $props.color]]
`},Symbol.toStringTag,{value:"Module"}));var Ki={exports:{}},rr=(i,e={})=>{const t=e.safe===!0||e.keepProtected===!0;let s=!1;const n=r=>{let o="",u,a;for(const l of r.nodes)switch(l.type){case"block":if(e.first&&s===!0){o+=n(l);break}if(e.preserveNewlines===!0){u=n(l),a=u.split(`
`),o+=`
`.repeat(a.length-1);break}if(t===!0&&l.protected===!0){o+=n(l);break}s=!0;break;case"line":if(e.first&&s===!0){o+=l.value;break}t===!0&&l.protected===!0&&(o+=l.value),s=!0;break;case"open":case"close":case"text":case"newline":default:{o+=l.value||"";break}}return o};return n(i)};class $i{constructor(e){this.type=e.type,e.value&&(this.value=e.value),e.match&&(this.match=e.match),this.newline=e.newline||""}get protected(){return Boolean(this.match)&&this.match[1]==="!"}}class or extends $i{constructor(e){super(e),this.nodes=e.nodes||[]}push(e){this.nodes.push(e)}get protected(){return this.nodes.length>0&&this.nodes[0].protected===!0}}var lr={Node:$i,Block:or},en={};(function(i){i.ada={LINE_REGEX:/^--.*/},i.apl={LINE_REGEX:/^⍝.*/},i.applescript={BLOCK_OPEN_REGEX:/^\(\*/,BLOCK_CLOSE_REGEX:/^\*\)/},i.csharp={LINE_REGEX:/^\/\/.*/},i.haskell={BLOCK_OPEN_REGEX:/^\{-/,BLOCK_CLOSE_REGEX:/^-\}/,LINE_REGEX:/^--.*/},i.javascript={BLOCK_OPEN_REGEX:/^\/\*\*?(!?)/,BLOCK_CLOSE_REGEX:/^\*\/(\n?)/,LINE_REGEX:/^\/\/(!?).*/},i.lua={BLOCK_OPEN_REGEX:/^--\[\[/,BLOCK_CLOSE_REGEX:/^\]\]/,LINE_REGEX:/^--.*/},i.matlab={BLOCK_OPEN_REGEX:/^%{/,BLOCK_CLOSE_REGEX:/^%}/,LINE_REGEX:/^%.*/},i.perl={LINE_REGEX:/^#.*/},i.php={...i.javascript,LINE_REGEX:/^(#|\/\/).*?(?=\?>|\n)/},i.python={BLOCK_OPEN_REGEX:/^"""/,BLOCK_CLOSE_REGEX:/^"""/,LINE_REGEX:/^#.*/},i.ruby={BLOCK_OPEN_REGEX:/^=begin/,BLOCK_CLOSE_REGEX:/^=end/,LINE_REGEX:/^#.*/},i.shebang=i.hashbang={LINE_REGEX:/^#!.*/},i.c=i.javascript,i.csharp=i.javascript,i.css=i.javascript,i.java=i.javascript,i.js=i.javascript,i.less=i.javascript,i.pascal=i.applescript,i.ocaml=i.applescript,i.sass=i.javascript,i.sql=i.ada,i.swift=i.javascript,i.ts=i.javascript,i.typscript=i.javascript})(en);const{Node:je,Block:tn}=lr,ar=en,ui={ESCAPED_CHAR_REGEX:/^\\./,QUOTED_STRING_REGEX:/^(['"`])((?:\\\1|[^\1])*?)(\1)/,NEWLINE_REGEX:/^\r*\n/};var cr=(i,e={})=>{if(typeof i!="string")throw new TypeError("Expected input to be a string");const t=new tn({type:"root",nodes:[]}),s=[t],n=(e.language||"javascript").toLowerCase(),r=ar[n];if(typeof r=="undefined")throw new Error(`Language "${n}" is not supported by strip-comments`);const{LINE_REGEX:o,BLOCK_OPEN_REGEX:u,BLOCK_CLOSE_REGEX:a}=r;let l=t,d=i,m,I;const y=[u,a].filter(Boolean);let b=!1;y.every(E=>E.source==='^"""')&&(b=!0);const p=(E=d[0]||"")=>(d=d.slice(E.length),E),g=(E,P="text")=>{const L=E.exec(d);if(L)return p(L[0]),{type:P,value:L[0],match:L}},A=E=>{if(I&&I.type==="text"&&E.type==="text"){I.value+=E.value;return}l.push(E),E.nodes&&(s.push(E),l=E),I=E},Y=()=>{if(l.type==="root")throw new SyntaxError("Unclosed block comment");s.pop(),l=s[s.length-1]};for(;d!=="";){if(m=g(ui.ESCAPED_CHAR_REGEX,"text")){A(new je(m));continue}if(l.type!=="block"&&(!I||!/\w$/.test(I.value))&&!(b&&d.startsWith('"""'))&&(m=g(ui.QUOTED_STRING_REGEX,"text"))){A(new je(m));continue}if(m=g(ui.NEWLINE_REGEX,"newline")){A(new je(m));continue}if(u&&e.block&&!(b&&l.type==="block")&&(m=g(u,"open"))){A(new tn({type:"block"})),A(new je(m));continue}if(a&&l.type==="block"&&e.block&&(m=g(a,"close"))){m.newline=m.match[1]||"",A(new je(m)),Y();continue}if(o&&l.type!=="block"&&e.line&&(m=g(o,"line"))){A(new je(m));continue}if(m=g(/^[a-zABD-Z0-9\t ]+/,"text")){A(new je(m));continue}A(new je({type:"text",value:p(d[0])}))}return t};/*!
 * strip-comments <https://github.com/jonschlinkert/strip-comments>
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */const Nt=rr,At=cr,Rt=Ki.exports=(i,e)=>{const t={...e,block:!0,line:!0};return Nt(At(i,t),t)};Rt.block=(i,e)=>{const t={...e,block:!0};return Nt(At(i,t),t)},Rt.line=(i,e)=>{const t={...e,line:!0};return Nt(At(i,t),t)},Rt.first=(i,e)=>{const t={...e,block:!0,line:!0,first:!0};return Nt(At(i,t),t)},Rt.parse=At;function ur(i,e){return Ki.exports(i)}function hr(i,e){let t=nn(i,e);for(var s of t){let n=i.slice(0,s[0]+1);n+=i.slice(s[0]+1,s[1]).replaceAll("/*","[!C~1!]").replaceAll("//","[!C~2!]"),n+=i.slice(s[1]),i=n}return i}function fr(i,e){return i.replaceAll("[!C~1!]","/*").replaceAll("[!C~2!]","//")}function nn(i,e){let t={"'":0,'"':0,"`":0},s=[],n=null;for(var r=0;r<i.length;r++)for(var o in t)if(i[r]===o&&i[r-1]!=="\\"&&(t[o]++,n||(n=[r,void 0])),i[r]===o&&i[r-1]!=="\\"&&r>n[0]&&(t[o]=0,n&&Object.values(t).every(u=>!u)&&(n[1]=r,s.push(n),n=null)),t[o]<0)throw`Missing quote ${o} in ${e}`;if(n!==null)throw`Missing quote in ${e}: ${JSON.stringify(t)}`;return s}function dr(i,e=btoa){let t=/\/([^*\/]?.+)\//g;do{var s=t.exec(i);if(s){let n=s[0].length;s[1].slice(-1)==="*"&&(n--,s[1]=s[1].slice(0,-1));let r=i.slice(0,s.index+1),o=e(s[1]);r+=o+i.slice(s.index+n-1),i=r,t.lastIndex=s.index+o.length}}while(s);return i}function pr(i,e,t,s="{}"){let n=s[0],r=s[1],o={"'":0,'"':0,"`":0},u=0,a=null;for(var l=e;l<i.length;l++){for(var d in o)if(i[l]===d&&i[l-1]!=="\\"&&(o[d]++,a||(a=[l,void 0])),i[l]===d&&i[l-1]!=="\\"&&l>a[0]&&(o[d]=0,a&&Object.values(o).every(I=>!I)&&(a[1]=l,a=null)),o[d]<0)throw`Missing quote ${d} in ${t}`;if(o["'"]+o['"']+o["`"]===0&&(i[l]===n&&u++,i[l]===r&&u--,u===0))break}if(u!==0)throw`Missing bracket in ${t}: ${s}`;if(a!==null)throw`Missing quote in ${t}: ${JSON.stringify(o)}`;return l}const hi={maskStrings:hr,unmaskStrings:fr,findStrings:nn,maskRegex:dr,decomment:ur,findClosingBracket:pr},Dt=/(function[\s]+|)([$A-Z_][0-9A-Z_$\.]*)[\s]*?\(([^()]*?)\)[\s]*?{/gmi,Bt=/(function[\s]+|)([$A-Z_][0-9A-Z_$\.]*)[\s]*?\(([^()]*?)\)[\s]*?=>[\s]*?{/gmi,fi=/(function[\s]+|)([$A-Z_][0-9A-Z_$\.]*)[\s]*?\(([^()]*?)\)[\s]*?=>/gmi,sn=["if","for","while","switch","catch","with"];class gr{constructor(e,t){this.tagProps=this.parseTagProps(e),this.src=t,this.flags="",this.parseBody()}parseTagProps(e){let t={},s=e.split(",");for(var n of s){let[r,o]=n.split("=");t[r.trim()]=o.trim()}return t}parseBody(){let e=hi.decomment(this.src);e=this.prepFuncions1(e),e=this.prepFuncions2(e),e=this.prepFuncions3(e),this.prefab=this.wrapTheCode(e,this.flags)}prepFuncions1(e){let t="",s=0;Dt.lastIndex=0;do{var n=Dt.exec(e);if(n){n[1].trim();let r=n[2],o=n[3],u=Dt.lastIndex-1,a=hi.findClosingBracket(e,u);if(sn.includes(r))t+=e.slice(s,a+1);else{let l=e.slice(u,a+1);t+=e.slice(s,n.index),t+=`var ${r} = (${o}) => ${l}`,this.parseFlags(r,o,l)}Dt.lastIndex=a,s=a+1}}while(n);return t+e.slice(s)}prepFuncions2(e){let t="",s=0;Bt.lastIndex=0;do{var n=Bt.exec(e);if(n){n[1].trim();let r=n[2],o=n[3],u=Bt.lastIndex-1,a=hi.findClosingBracket(e,u);if(sn.includes(r))t+=e.slice(s,a+1);else{let l=e.slice(u,a+1);t+=e.slice(s,n.index),t+=`var ${r} = (${o}) => (${l})`,this.parseFlags(r,o,l)}Bt.lastIndex=a,s=a+1}}while(n);return t+e.slice(s)}prepFuncions3(e){let t="",s=0;fi.lastIndex=0;do{var n=fi.exec(e);if(n){n[1].trim();let r=n[2],o=n[3],u=fi.lastIndex;t+=e.slice(s,n.index),t+=`var ${r} = (${o}) => `,this.parseFlags(r,o,""),s=u+1}}while(n);return t+e.slice(s)}parseFlags(e,t,s){if(e==="yRange"){let n=!!t.trim().length;this.flags+=`yRangePreCalc: ${n},
`}}wrapTheCode(e,t){return new Function("env",`

            // Setup the environment
            let { $core, $props, $events } = env
            let prop = (...args) => env.prop(...args)

            // Add primitives
            let $lib = env.lib

            // Function stubs
            var init = () => {}
            var destroy = () => {}
            var meta = () => null
            var dataFormat = () => null
            var draw = () => {}
            var drawSidebar = null
            var drawBotbar = null
            var yRange = null
            var preSampler = null
            var legend = null
            var legendHtml = null
            var valueTracker = null

            // Overlay code
            ${e}

            // Output overlay object
            return {
                gridId: () => $core.layout.id,
                id: () => $core.id,
                init, meta, dataFormat,
                draw, drawSidebar, drawBotbar,
                yRange, preSampler,
                legend, legendHtml,
                valueTracker,
                // Generated flags
                ${t}
            }
        `)}}const rn=.1,mr="lite",vr=/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,on=/\[OVERLAY[\s]+([\s\S]*?)]([\s\S]*?)(\[OVERLAY|\[SCRIPT|\[EOF)/gm;class Ir{constructor(e,t="Unknown Script"){this.version=rn,this.src=e+`
[EOF]`,this.scriptName=t,this.scriptVers=this.navyVers()[0],this.scriptTag=this.navyVers()[1],this.overlays=[],this.scripts=[],this.scriptVers===0&&console.warn(`${t}: There is no script version string`),this.scriptVers>this.version&&console.warn(`${t}: Script version > parser version`),this.scriptTag!==mr&&console.warn(`${t}: Script version should have 'lite' tag
Most likely are using the community version of NavyJS
with a script written for the PRO version.
If not the case just use 'lite' tag: ${rn}-lite`),this.overlayTags()}navyVers(){let e=(this.src.match(vr)||[])[0];if(e){let t=e.split("~");if(t.length<2)return[0];let s=parseFloat(t[1]),n=t[1].split("-")[1];return[s===s?s:0,n]}return[0]}overlayTags(){for(var e;e=on.exec(this.src);)this.overlays.push(new gr(e[1],e[2])),on.lastIndex-=10}}const yr=Object.assign({"../scripts/area.navy":ir,"../scripts/candles.navy":nr,"../scripts/spline.navy":sr});class br{init(e){this.srcLib=Object.values(yr).map(t=>t.default),this.srcLib.push(...e),this.prefabs={},this.parse()}parse(){this.prefabs={};for(var e of this.srcLib){let s=new Ir(e);for(var t of s.overlays)this.prefabs[t.tagProps.name]={name:t.tagProps.name,author:t.tagProps.author,version:t.tagProps.version,ctx:t.tagProps.ctx||"Canvas",make:t.prefab}}}}let di={};function Ar(i){return di[i]||(di[i]=new br(i)),di[i]}const pi={instance:Ar};class _r{constructor(e,t,s,n){this.ctx=s,this.core=e,this.style=n.src[6]||t,this.draw(n)}draw(e){const t=e.src[4]>=e.src[1],s=t?this.style.colorCandleUp:this.style.colorCandleDw,n=t?this.style.colorWickUp:this.style.colorWickDw;let r=Math.max(e.w,1),o=e.x-1;this.ctx.lineWidth=1,this.ctx.strokeStyle=n,this.ctx.beginPath(),this.ctx.moveTo(o,Math.floor(e.h)),this.ctx.lineTo(o,Math.floor(e.l)),this.ctx.stroke(),this.ctx.lineWidth=r,this.ctx.strokeStyle=s,this.ctx.beginPath(),this.ctx.moveTo(o,Math.floor(Math.min(e.o,e.c))),this.ctx.lineTo(o,Math.floor(Math.max(e.o,e.c))+(e.o===e.c?1:0)),this.ctx.stroke()}}function Tr(i,e){let t=e.x-1;i.moveTo(t,Math.floor(Math.min(e.o-1,e.c-1))),i.lineTo(t,Math.floor(Math.max(e.o,e.c)))}function wr(i,e){let t=e.x-1;i.moveTo(t,Math.floor(e.h)),i.lineTo(t,Math.floor(e.l))}function Er(i,e,t){let s=t.height,n=Math.max(1,e.x2-e.x1-.5),r=e.h,o=(e.x2+e.x1)*.5;i.lineWidth=n,i.moveTo(o,s-r),i.lineTo(o,s)}class Sr{constructor(e,t,s,n){this.ctx=s,this.style=n.src[6]||t,this.layout=e.layout,this.draw(n)}draw(e){let t=this.layout.height,s=e.x2-e.x1,n=Math.floor(e.h);this.ctx.fillStyle=e.green?this.style.colorVolUp:this.style.colorVolDw,this.ctx.fillRect(Math.floor(e.x1),Math.floor(t-n-.5),Math.floor(s),Math.floor(n+1))}}function Yr(i,e=!0,t=!0){let s=i.props.config,n=i.props.interval,r=i.data,o=i.layout.time2x,u=i.layout,a=i.view,l=5,d=[],m=[],I=[],y=[],b=[],p=[];if(t)var g=Mr(i.dataSubset,l),A=s.VOLSCALE*u.height/g;var Y,E,P,L=void 0;let{A:F,B:M,pxStep:R}=u,O=R*s.CANDLEW,J=R>5?1:0;for(var H=a.i1,k=a.i2;H<=k;H++){let _=r[H],T=_[4]>=_[1];if(P=o(_[0])+1,r[H-1]&&_[0]-r[H-1][0]>n&&(L=null),e){let w={x:P,w:O,o:Math.floor(_[1]*F+M),h:Math.floor(_[2]*F+M),l:Math.floor(_[3]*F+M),c:Math.floor(_[4]*F+M),green:T,src:_};T?(d.push(w),I.push(w)):(m.push(w),y.push(w))}if(t){Y=L||Math.floor(P-R*.5),E=Math.floor(P+R*.5)-.5;let w={x1:Y,x2:E,h:_[5]*A,green:T,src:_};T?b.push(w):p.push(w)}L=E+J}return{upBodies:d,upWicks:I,dwBodies:m,dwWicks:y,upVolbars:b,dwVolbars:p,maxVolume:g}}function Mr(i,e){let t=0;for(var s=0;s<i.length;s++){let n=i[s][e];n>t&&(t=n)}return t}function ln(i,e,t,s,n){let r=0,o=[],u=0,a=1/n,l=Math.max(t-n,0);for(var d=l;d<=s;d++)r+=i[d][e],u++,u>n&&(r-=i[d-n][e],u--),u===n&&o.push([i[d][0],r*a]);return o}function kr(i,e=[]){return e[4]>=e[1]?i.colorBodyUp:i.colorBodyDw}function Jr(i,e,t,s){let n=e.view.i1,r=e.view.i2,o=t.avgVolumeSMA,u=ln(e.data,5,n,r,o),a=e.layout,l=s.maxVolume,d=e.props.config.VOLSCALE*a.height/l,m=a.height;e.props.config.VOLSCALE*.5*m,i.lineJoin="round",i.lineWidth=.75,i.strokeStyle=t.colorAvgVol,i.beginPath();for(var I=0,y=u.length;I<y;I++){let b=a.time2x(u[I][0]),p=m-u[I][1]*d;i.lineTo(b,p)}i.stroke()}const xr=N.formatCash;class Cr{constructor(e,t,s,n){let r=Oe.instance(n.id),o=Pe.instance(n.id),u=le.instance(n.id),a=Pt.instance(n.id);this.ovSrc=t,this.overlay=null,this.id=e,this.$core={hub:r,meta:o,scan:a},this.update(t,s,n),this.$props=t.props,this.$events=u,this.lib={Candle:_r,Volbar:Sr,layoutCnv:Yr,formatCash:xr,candleBody:Tr,candleWick:wr,volumeBar:Er,fastSma:ln,avgVolume:Jr,candleColor:kr}}prop(e,t={}){e in this.$props||(this.$props[e]=t.def)}update(e,t,s){if(!t)return;let n=this.$core;n.layout=this.buildLayout(t,s.range),n.dataSubset=e.dataSubset,n.data=e.data,n.view=e.dataView,n.id=e.id,n.paneId=n.layout.id,n.uuid=e.uuid,n.range=s.range,n.colors=s.colors,n.cursor=s.cursor,n.src=e,n.props=s}buildLayout(e,t){let s={};this.scaleId=this.getScaleId(e);let n=e.scales[this.scaleId];return Xi(Object.assign(s,e,n),t)}getScaleId(e){let t=e.scales;for(var s in t)if(t[s].scaleSpecs.ovIdxs.includes(this.id))return s}}class Lt{constructor(e,t,s){this.id=0,this.nvId=s,this.name=t,this.zIndex=0,this.overlay=null,this.ovSrc=null,this.env=null,this.ctxType=null,this.display=!0,this.opacity=void 0}update(){var e;!this.ovSrc||(this.display=(e=this.ovSrc.settings.display)!=null?e:!0)}}class Or{constructor(e){this.t0=this.t=N.now(),this.id=setInterval(()=>{N.now()-this.t>100||(N.now()-this.t0>1200&&this.stop(),this.id&&e(this),this.t=N.now())},16)}stop(){clearInterval(this.id),this.id=null}}var an={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(i){(function(e,t,s,n){var r=["","webkit","Moz","MS","ms","o"],o=t.createElement("div"),u="function",a=Math.round,l=Math.abs,d=Date.now;function m(c,h,f){return setTimeout(E(c,f),h)}function I(c,h,f){return Array.isArray(c)?(y(c,f[h],f),!0):!1}function y(c,h,f){var v;if(!!c)if(c.forEach)c.forEach(h,f);else if(c.length!==n)for(v=0;v<c.length;)h.call(f,c[v],v,c),v++;else for(v in c)c.hasOwnProperty(v)&&h.call(f,c[v],v,c)}function b(c,h,f){var v="DEPRECATED METHOD: "+h+`
`+f+` AT 
`;return function(){var S=new Error("get-stack-trace"),C=S&&S.stack?S.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",j=e.console&&(e.console.warn||e.console.log);return j&&j.call(e.console,v,C),c.apply(this,arguments)}}var p;typeof Object.assign!="function"?p=function(h){if(h===n||h===null)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(h),v=1;v<arguments.length;v++){var S=arguments[v];if(S!==n&&S!==null)for(var C in S)S.hasOwnProperty(C)&&(f[C]=S[C])}return f}:p=Object.assign;var g=b(function(h,f,v){for(var S=Object.keys(f),C=0;C<S.length;)(!v||v&&h[S[C]]===n)&&(h[S[C]]=f[S[C]]),C++;return h},"extend","Use `assign`."),A=b(function(h,f){return g(h,f,!0)},"merge","Use `assign`.");function Y(c,h,f){var v=h.prototype,S;S=c.prototype=Object.create(v),S.constructor=c,S._super=v,f&&p(S,f)}function E(c,h){return function(){return c.apply(h,arguments)}}function P(c,h){return typeof c==u?c.apply(h&&h[0]||n,h):c}function L(c,h){return c===n?h:c}function F(c,h,f){y(J(h),function(v){c.addEventListener(v,f,!1)})}function M(c,h,f){y(J(h),function(v){c.removeEventListener(v,f,!1)})}function R(c,h){for(;c;){if(c==h)return!0;c=c.parentNode}return!1}function O(c,h){return c.indexOf(h)>-1}function J(c){return c.trim().split(/\s+/g)}function H(c,h,f){if(c.indexOf&&!f)return c.indexOf(h);for(var v=0;v<c.length;){if(f&&c[v][f]==h||!f&&c[v]===h)return v;v++}return-1}function k(c){return Array.prototype.slice.call(c,0)}function _(c,h,f){for(var v=[],S=[],C=0;C<c.length;){var j=h?c[C][h]:c[C];H(S,j)<0&&v.push(c[C]),S[C]=j,C++}return f&&(h?v=v.sort(function(oe,fe){return oe[h]>fe[h]}):v=v.sort()),v}function T(c,h){for(var f,v,S=h[0].toUpperCase()+h.slice(1),C=0;C<r.length;){if(f=r[C],v=f?f+S:h,v in c)return v;C++}return n}var w=1;function B(){return w++}function z(c){var h=c.ownerDocument||c;return h.defaultView||h.parentWindow||e}var V=/mobile|tablet|ip(ad|hone|od)|android/i,$="ontouchstart"in e,ne=T(e,"PointerEvent")!==n,Me=$&&V.test(navigator.userAgent),ae="touch",G="pen",se="mouse",we="kinect",ze=25,D=1,me=2,ee=4,ce=8,ft=1,qe=2,st=4,Tt=8,wt=16,Ne=qe|st,rt=Tt|wt,Fn=Ne|rt,Gn=["x","y"],Ut=["clientX","clientY"];function Ee(c,h){var f=this;this.manager=c,this.callback=h,this.element=c.element,this.target=c.options.inputTarget,this.domHandler=function(v){P(c.options.enable,[c])&&f.handler(v)},this.init()}Ee.prototype={handler:function(){},init:function(){this.evEl&&F(this.element,this.evEl,this.domHandler),this.evTarget&&F(this.target,this.evTarget,this.domHandler),this.evWin&&F(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(z(this.element),this.evWin,this.domHandler)}};function rl(c){var h,f=c.options.inputClass;return f?h=f:ne?h=bi:Me?h=Ht:$?h=Ai:h=Gt,new h(c,ol)}function ol(c,h,f){var v=f.pointers.length,S=f.changedPointers.length,C=h&D&&v-S===0,j=h&(ee|ce)&&v-S===0;f.isFirst=!!C,f.isFinal=!!j,C&&(c.session={}),f.eventType=h,ll(c,f),c.emit("hammer.input",f),c.recognize(f),c.session.prevInput=f}function ll(c,h){var f=c.session,v=h.pointers,S=v.length;f.firstInput||(f.firstInput=Hn(h)),S>1&&!f.firstMultiple?f.firstMultiple=Hn(h):S===1&&(f.firstMultiple=!1);var C=f.firstInput,j=f.firstMultiple,re=j?j.center:C.center,oe=h.center=Vn(v);h.timeStamp=d(),h.deltaTime=h.timeStamp-C.timeStamp,h.angle=yi(re,oe),h.distance=Ft(re,oe),al(f,h),h.offsetDirection=jn(h.deltaX,h.deltaY);var fe=Xn(h.deltaTime,h.deltaX,h.deltaY);h.overallVelocityX=fe.x,h.overallVelocityY=fe.y,h.overallVelocity=l(fe.x)>l(fe.y)?fe.x:fe.y,h.scale=j?hl(j.pointers,v):1,h.rotation=j?ul(j.pointers,v):0,h.maxPointers=f.prevInput?h.pointers.length>f.prevInput.maxPointers?h.pointers.length:f.prevInput.maxPointers:h.pointers.length,cl(f,h);var De=c.element;R(h.srcEvent.target,De)&&(De=h.srcEvent.target),h.target=De}function al(c,h){var f=h.center,v=c.offsetDelta||{},S=c.prevDelta||{},C=c.prevInput||{};(h.eventType===D||C.eventType===ee)&&(S=c.prevDelta={x:C.deltaX||0,y:C.deltaY||0},v=c.offsetDelta={x:f.x,y:f.y}),h.deltaX=S.x+(f.x-v.x),h.deltaY=S.y+(f.y-v.y)}function cl(c,h){var f=c.lastInterval||h,v=h.timeStamp-f.timeStamp,S,C,j,re;if(h.eventType!=ce&&(v>ze||f.velocity===n)){var oe=h.deltaX-f.deltaX,fe=h.deltaY-f.deltaY,De=Xn(v,oe,fe);C=De.x,j=De.y,S=l(De.x)>l(De.y)?De.x:De.y,re=jn(oe,fe),c.lastInterval=h}else S=f.velocity,C=f.velocityX,j=f.velocityY,re=f.direction;h.velocity=S,h.velocityX=C,h.velocityY=j,h.direction=re}function Hn(c){for(var h=[],f=0;f<c.pointers.length;)h[f]={clientX:a(c.pointers[f].clientX),clientY:a(c.pointers[f].clientY)},f++;return{timeStamp:d(),pointers:h,center:Vn(h),deltaX:c.deltaX,deltaY:c.deltaY}}function Vn(c){var h=c.length;if(h===1)return{x:a(c[0].clientX),y:a(c[0].clientY)};for(var f=0,v=0,S=0;S<h;)f+=c[S].clientX,v+=c[S].clientY,S++;return{x:a(f/h),y:a(v/h)}}function Xn(c,h,f){return{x:h/c||0,y:f/c||0}}function jn(c,h){return c===h?ft:l(c)>=l(h)?c<0?qe:st:h<0?Tt:wt}function Ft(c,h,f){f||(f=Gn);var v=h[f[0]]-c[f[0]],S=h[f[1]]-c[f[1]];return Math.sqrt(v*v+S*S)}function yi(c,h,f){f||(f=Gn);var v=h[f[0]]-c[f[0]],S=h[f[1]]-c[f[1]];return Math.atan2(S,v)*180/Math.PI}function ul(c,h){return yi(h[1],h[0],Ut)+yi(c[1],c[0],Ut)}function hl(c,h){return Ft(h[0],h[1],Ut)/Ft(c[0],c[1],Ut)}var fl={mousedown:D,mousemove:me,mouseup:ee},dl="mousedown",pl="mousemove mouseup";function Gt(){this.evEl=dl,this.evWin=pl,this.pressed=!1,Ee.apply(this,arguments)}Y(Gt,Ee,{handler:function(h){var f=fl[h.type];f&D&&h.button===0&&(this.pressed=!0),f&me&&h.which!==1&&(f=ee),this.pressed&&(f&ee&&(this.pressed=!1),this.callback(this.manager,f,{pointers:[h],changedPointers:[h],pointerType:se,srcEvent:h}))}});var gl={pointerdown:D,pointermove:me,pointerup:ee,pointercancel:ce,pointerout:ce},ml={2:ae,3:G,4:se,5:we},zn="pointerdown",qn="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(zn="MSPointerDown",qn="MSPointerMove MSPointerUp MSPointerCancel");function bi(){this.evEl=zn,this.evWin=qn,Ee.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Y(bi,Ee,{handler:function(h){var f=this.store,v=!1,S=h.type.toLowerCase().replace("ms",""),C=gl[S],j=ml[h.pointerType]||h.pointerType,re=j==ae,oe=H(f,h.pointerId,"pointerId");C&D&&(h.button===0||re)?oe<0&&(f.push(h),oe=f.length-1):C&(ee|ce)&&(v=!0),!(oe<0)&&(f[oe]=h,this.callback(this.manager,C,{pointers:f,changedPointers:[h],pointerType:j,srcEvent:h}),v&&f.splice(oe,1))}});var vl={touchstart:D,touchmove:me,touchend:ee,touchcancel:ce},Il="touchstart",yl="touchstart touchmove touchend touchcancel";function Wn(){this.evTarget=Il,this.evWin=yl,this.started=!1,Ee.apply(this,arguments)}Y(Wn,Ee,{handler:function(h){var f=vl[h.type];if(f===D&&(this.started=!0),!!this.started){var v=bl.call(this,h,f);f&(ee|ce)&&v[0].length-v[1].length===0&&(this.started=!1),this.callback(this.manager,f,{pointers:v[0],changedPointers:v[1],pointerType:ae,srcEvent:h})}}});function bl(c,h){var f=k(c.touches),v=k(c.changedTouches);return h&(ee|ce)&&(f=_(f.concat(v),"identifier",!0)),[f,v]}var Al={touchstart:D,touchmove:me,touchend:ee,touchcancel:ce},_l="touchstart touchmove touchend touchcancel";function Ht(){this.evTarget=_l,this.targetIds={},Ee.apply(this,arguments)}Y(Ht,Ee,{handler:function(h){var f=Al[h.type],v=Tl.call(this,h,f);!v||this.callback(this.manager,f,{pointers:v[0],changedPointers:v[1],pointerType:ae,srcEvent:h})}});function Tl(c,h){var f=k(c.touches),v=this.targetIds;if(h&(D|me)&&f.length===1)return v[f[0].identifier]=!0,[f,f];var S,C,j=k(c.changedTouches),re=[],oe=this.target;if(C=f.filter(function(fe){return R(fe.target,oe)}),h===D)for(S=0;S<C.length;)v[C[S].identifier]=!0,S++;for(S=0;S<j.length;)v[j[S].identifier]&&re.push(j[S]),h&(ee|ce)&&delete v[j[S].identifier],S++;if(!!re.length)return[_(C.concat(re),"identifier",!0),re]}var wl=2500,Zn=25;function Ai(){Ee.apply(this,arguments);var c=E(this.handler,this);this.touch=new Ht(this.manager,c),this.mouse=new Gt(this.manager,c),this.primaryTouch=null,this.lastTouches=[]}Y(Ai,Ee,{handler:function(h,f,v){var S=v.pointerType==ae,C=v.pointerType==se;if(!(C&&v.sourceCapabilities&&v.sourceCapabilities.firesTouchEvents)){if(S)El.call(this,f,v);else if(C&&Sl.call(this,v))return;this.callback(h,f,v)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function El(c,h){c&D?(this.primaryTouch=h.changedPointers[0].identifier,Qn.call(this,h)):c&(ee|ce)&&Qn.call(this,h)}function Qn(c){var h=c.changedPointers[0];if(h.identifier===this.primaryTouch){var f={x:h.clientX,y:h.clientY};this.lastTouches.push(f);var v=this.lastTouches,S=function(){var C=v.indexOf(f);C>-1&&v.splice(C,1)};setTimeout(S,wl)}}function Sl(c){for(var h=c.srcEvent.clientX,f=c.srcEvent.clientY,v=0;v<this.lastTouches.length;v++){var S=this.lastTouches[v],C=Math.abs(h-S.x),j=Math.abs(f-S.y);if(C<=Zn&&j<=Zn)return!0}return!1}var Kn=T(o.style,"touchAction"),$n=Kn!==n,es="compute",ts="auto",_i="manipulation",ot="none",Et="pan-x",St="pan-y",Vt=Ml();function Ti(c,h){this.manager=c,this.set(h)}Ti.prototype={set:function(c){c==es&&(c=this.compute()),$n&&this.manager.element.style&&Vt[c]&&(this.manager.element.style[Kn]=c),this.actions=c.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var c=[];return y(this.manager.recognizers,function(h){P(h.options.enable,[h])&&(c=c.concat(h.getTouchAction()))}),Yl(c.join(" "))},preventDefaults:function(c){var h=c.srcEvent,f=c.offsetDirection;if(this.manager.session.prevented){h.preventDefault();return}var v=this.actions,S=O(v,ot)&&!Vt[ot],C=O(v,St)&&!Vt[St],j=O(v,Et)&&!Vt[Et];if(S){var re=c.pointers.length===1,oe=c.distance<2,fe=c.deltaTime<250;if(re&&oe&&fe)return}if(!(j&&C)&&(S||C&&f&Ne||j&&f&rt))return this.preventSrc(h)},preventSrc:function(c){this.manager.session.prevented=!0,c.preventDefault()}};function Yl(c){if(O(c,ot))return ot;var h=O(c,Et),f=O(c,St);return h&&f?ot:h||f?h?Et:St:O(c,_i)?_i:ts}function Ml(){if(!$n)return!1;var c={},h=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(f){c[f]=h?e.CSS.supports("touch-action",f):!0}),c}var Xt=1,Se=2,dt=4,We=8,Fe=We,Yt=16,Re=32;function Ge(c){this.options=p({},this.defaults,c||{}),this.id=B(),this.manager=null,this.options.enable=L(this.options.enable,!0),this.state=Xt,this.simultaneous={},this.requireFail=[]}Ge.prototype={defaults:{},set:function(c){return p(this.options,c),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(c){if(I(c,"recognizeWith",this))return this;var h=this.simultaneous;return c=jt(c,this),h[c.id]||(h[c.id]=c,c.recognizeWith(this)),this},dropRecognizeWith:function(c){return I(c,"dropRecognizeWith",this)?this:(c=jt(c,this),delete this.simultaneous[c.id],this)},requireFailure:function(c){if(I(c,"requireFailure",this))return this;var h=this.requireFail;return c=jt(c,this),H(h,c)===-1&&(h.push(c),c.requireFailure(this)),this},dropRequireFailure:function(c){if(I(c,"dropRequireFailure",this))return this;c=jt(c,this);var h=H(this.requireFail,c);return h>-1&&this.requireFail.splice(h,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(c){return!!this.simultaneous[c.id]},emit:function(c){var h=this,f=this.state;function v(S){h.manager.emit(S,c)}f<We&&v(h.options.event+is(f)),v(h.options.event),c.additionalEvent&&v(c.additionalEvent),f>=We&&v(h.options.event+is(f))},tryEmit:function(c){if(this.canEmit())return this.emit(c);this.state=Re},canEmit:function(){for(var c=0;c<this.requireFail.length;){if(!(this.requireFail[c].state&(Re|Xt)))return!1;c++}return!0},recognize:function(c){var h=p({},c);if(!P(this.options.enable,[this,h])){this.reset(),this.state=Re;return}this.state&(Fe|Yt|Re)&&(this.state=Xt),this.state=this.process(h),this.state&(Se|dt|We|Yt)&&this.tryEmit(h)},process:function(c){},getTouchAction:function(){},reset:function(){}};function is(c){return c&Yt?"cancel":c&We?"end":c&dt?"move":c&Se?"start":""}function ns(c){return c==wt?"down":c==Tt?"up":c==qe?"left":c==st?"right":""}function jt(c,h){var f=h.manager;return f?f.get(c):c}function ke(){Ge.apply(this,arguments)}Y(ke,Ge,{defaults:{pointers:1},attrTest:function(c){var h=this.options.pointers;return h===0||c.pointers.length===h},process:function(c){var h=this.state,f=c.eventType,v=h&(Se|dt),S=this.attrTest(c);return v&&(f&ce||!S)?h|Yt:v||S?f&ee?h|We:h&Se?h|dt:Se:Re}});function zt(){ke.apply(this,arguments),this.pX=null,this.pY=null}Y(zt,ke,{defaults:{event:"pan",threshold:10,pointers:1,direction:Fn},getTouchAction:function(){var c=this.options.direction,h=[];return c&Ne&&h.push(St),c&rt&&h.push(Et),h},directionTest:function(c){var h=this.options,f=!0,v=c.distance,S=c.direction,C=c.deltaX,j=c.deltaY;return S&h.direction||(h.direction&Ne?(S=C===0?ft:C<0?qe:st,f=C!=this.pX,v=Math.abs(c.deltaX)):(S=j===0?ft:j<0?Tt:wt,f=j!=this.pY,v=Math.abs(c.deltaY))),c.direction=S,f&&v>h.threshold&&S&h.direction},attrTest:function(c){return ke.prototype.attrTest.call(this,c)&&(this.state&Se||!(this.state&Se)&&this.directionTest(c))},emit:function(c){this.pX=c.deltaX,this.pY=c.deltaY;var h=ns(c.direction);h&&(c.additionalEvent=this.options.event+h),this._super.emit.call(this,c)}});function wi(){ke.apply(this,arguments)}Y(wi,ke,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ot]},attrTest:function(c){return this._super.attrTest.call(this,c)&&(Math.abs(c.scale-1)>this.options.threshold||this.state&Se)},emit:function(c){if(c.scale!==1){var h=c.scale<1?"in":"out";c.additionalEvent=this.options.event+h}this._super.emit.call(this,c)}});function Ei(){Ge.apply(this,arguments),this._timer=null,this._input=null}Y(Ei,Ge,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ts]},process:function(c){var h=this.options,f=c.pointers.length===h.pointers,v=c.distance<h.threshold,S=c.deltaTime>h.time;if(this._input=c,!v||!f||c.eventType&(ee|ce)&&!S)this.reset();else if(c.eventType&D)this.reset(),this._timer=m(function(){this.state=Fe,this.tryEmit()},h.time,this);else if(c.eventType&ee)return Fe;return Re},reset:function(){clearTimeout(this._timer)},emit:function(c){this.state===Fe&&(c&&c.eventType&ee?this.manager.emit(this.options.event+"up",c):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}});function Si(){ke.apply(this,arguments)}Y(Si,ke,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ot]},attrTest:function(c){return this._super.attrTest.call(this,c)&&(Math.abs(c.rotation)>this.options.threshold||this.state&Se)}});function Yi(){ke.apply(this,arguments)}Y(Yi,ke,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ne|rt,pointers:1},getTouchAction:function(){return zt.prototype.getTouchAction.call(this)},attrTest:function(c){var h=this.options.direction,f;return h&(Ne|rt)?f=c.overallVelocity:h&Ne?f=c.overallVelocityX:h&rt&&(f=c.overallVelocityY),this._super.attrTest.call(this,c)&&h&c.offsetDirection&&c.distance>this.options.threshold&&c.maxPointers==this.options.pointers&&l(f)>this.options.velocity&&c.eventType&ee},emit:function(c){var h=ns(c.offsetDirection);h&&this.manager.emit(this.options.event+h,c),this.manager.emit(this.options.event,c)}});function qt(){Ge.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Y(qt,Ge,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[_i]},process:function(c){var h=this.options,f=c.pointers.length===h.pointers,v=c.distance<h.threshold,S=c.deltaTime<h.time;if(this.reset(),c.eventType&D&&this.count===0)return this.failTimeout();if(v&&S&&f){if(c.eventType!=ee)return this.failTimeout();var C=this.pTime?c.timeStamp-this.pTime<h.interval:!0,j=!this.pCenter||Ft(this.pCenter,c.center)<h.posThreshold;this.pTime=c.timeStamp,this.pCenter=c.center,!j||!C?this.count=1:this.count+=1,this._input=c;var re=this.count%h.taps;if(re===0)return this.hasRequireFailures()?(this._timer=m(function(){this.state=Fe,this.tryEmit()},h.interval,this),Se):Fe}return Re},failTimeout:function(){return this._timer=m(function(){this.state=Re},this.options.interval,this),Re},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Fe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function He(c,h){return h=h||{},h.recognizers=L(h.recognizers,He.defaults.preset),new Mi(c,h)}He.VERSION="2.0.7",He.defaults={domEvents:!1,touchAction:es,enable:!0,inputTarget:null,inputClass:null,preset:[[Si,{enable:!1}],[wi,{enable:!1},["rotate"]],[Yi,{direction:Ne}],[zt,{direction:Ne},["swipe"]],[qt],[qt,{event:"doubletap",taps:2},["tap"]],[Ei]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var kl=1,ss=2;function Mi(c,h){this.options=p({},He.defaults,h||{}),this.options.inputTarget=this.options.inputTarget||c,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=c,this.input=rl(this),this.touchAction=new Ti(this,this.options.touchAction),rs(this,!0),y(this.options.recognizers,function(f){var v=this.add(new f[0](f[1]));f[2]&&v.recognizeWith(f[2]),f[3]&&v.requireFailure(f[3])},this)}Mi.prototype={set:function(c){return p(this.options,c),c.touchAction&&this.touchAction.update(),c.inputTarget&&(this.input.destroy(),this.input.target=c.inputTarget,this.input.init()),this},stop:function(c){this.session.stopped=c?ss:kl},recognize:function(c){var h=this.session;if(!h.stopped){this.touchAction.preventDefaults(c);var f,v=this.recognizers,S=h.curRecognizer;(!S||S&&S.state&Fe)&&(S=h.curRecognizer=null);for(var C=0;C<v.length;)f=v[C],h.stopped!==ss&&(!S||f==S||f.canRecognizeWith(S))?f.recognize(c):f.reset(),!S&&f.state&(Se|dt|We)&&(S=h.curRecognizer=f),C++}},get:function(c){if(c instanceof Ge)return c;for(var h=this.recognizers,f=0;f<h.length;f++)if(h[f].options.event==c)return h[f];return null},add:function(c){if(I(c,"add",this))return this;var h=this.get(c.options.event);return h&&this.remove(h),this.recognizers.push(c),c.manager=this,this.touchAction.update(),c},remove:function(c){if(I(c,"remove",this))return this;if(c=this.get(c),c){var h=this.recognizers,f=H(h,c);f!==-1&&(h.splice(f,1),this.touchAction.update())}return this},on:function(c,h){if(c!==n&&h!==n){var f=this.handlers;return y(J(c),function(v){f[v]=f[v]||[],f[v].push(h)}),this}},off:function(c,h){if(c!==n){var f=this.handlers;return y(J(c),function(v){h?f[v]&&f[v].splice(H(f[v],h),1):delete f[v]}),this}},emit:function(c,h){this.options.domEvents&&Jl(c,h);var f=this.handlers[c]&&this.handlers[c].slice();if(!(!f||!f.length)){h.type=c,h.preventDefault=function(){h.srcEvent.preventDefault()};for(var v=0;v<f.length;)f[v](h),v++}},destroy:function(){this.element&&rs(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function rs(c,h){var f=c.element;if(!!f.style){var v;y(c.options.cssProps,function(S,C){v=T(f.style,C),h?(c.oldCssProps[v]=f.style[v],f.style[v]=S):f.style[v]=c.oldCssProps[v]||""}),h||(c.oldCssProps={})}}function Jl(c,h){var f=t.createEvent("Event");f.initEvent(c,!0,!0),f.gesture=h,h.target.dispatchEvent(f)}p(He,{INPUT_START:D,INPUT_MOVE:me,INPUT_END:ee,INPUT_CANCEL:ce,STATE_POSSIBLE:Xt,STATE_BEGAN:Se,STATE_CHANGED:dt,STATE_ENDED:We,STATE_RECOGNIZED:Fe,STATE_CANCELLED:Yt,STATE_FAILED:Re,DIRECTION_NONE:ft,DIRECTION_LEFT:qe,DIRECTION_RIGHT:st,DIRECTION_UP:Tt,DIRECTION_DOWN:wt,DIRECTION_HORIZONTAL:Ne,DIRECTION_VERTICAL:rt,DIRECTION_ALL:Fn,Manager:Mi,Input:Ee,TouchAction:Ti,TouchInput:Ht,MouseInput:Gt,PointerEventInput:bi,TouchMouseInput:Ai,SingleTouchInput:Wn,Recognizer:Ge,AttrRecognizer:ke,Tap:qt,Pan:zt,Swipe:Yi,Pinch:wi,Rotate:Si,Press:Ei,on:F,off:M,each:y,merge:A,extend:g,assign:p,inherit:Y,bindFn:E,prefixed:T});var xl=typeof e!="undefined"?e:typeof self!="undefined"?self:{};xl.Hammer=He,typeof n=="function"&&n.amd?n(function(){return He}):i.exports?i.exports=He:e[s]=He})(window,document,"Hammer")})(an);const Ue=an.exports;var cn={exports:{}};(function(i,e){(function(t,s){var n=function(u){return new n.Instance(u)};n.SUPPORT="wheel",n.ADD_EVENT="addEventListener",n.REMOVE_EVENT="removeEventListener",n.PREFIX="",n.READY=!1,n.Instance=function(u){return n.READY||(n.normalise.browser(),n.READY=!0),this.element=u,this.handlers=[],this},n.Instance.prototype={wheel:function(a,l){return n.event.add(this,n.SUPPORT,a,l),n.SUPPORT==="DOMMouseScroll"&&n.event.add(this,"MozMousePixelScroll",a,l),this},unwheel:function(a,l){return a===void 0&&(a=this.handlers.slice(-1)[0])&&(a=a.original),n.event.remove(this,n.SUPPORT,a,l),n.SUPPORT==="DOMMouseScroll"&&n.event.remove(this,"MozMousePixelScroll",a,l),this}},n.event={add:function(a,l,d,m){var I=d;d=function(y){y||(y=t.event);var b=n.normalise.event(y),p=n.normalise.delta(y);return I(b,p[0],p[1],p[2])},a.element[n.ADD_EVENT](n.PREFIX+l,d,m||!1),a.handlers.push({original:I,normalised:d})},remove:function(a,l,d,m){for(var I=d,y={},b,p=0,g=a.handlers.length;p<g;++p)y[a.handlers[p].original]=a.handlers[p];b=y[I],d=b.normalised,a.element[n.REMOVE_EVENT](n.PREFIX+l,d,m||!1);for(var A in a.handlers)if(a.handlers[A]==b){a.handlers.splice(A,1);break}}};var r,o;n.normalise={browser:function(){"onwheel"in s||s.documentMode>=9||(n.SUPPORT=s.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),t.addEventListener||(n.ADD_EVENT="attachEvent",n.REMOVE_EVENT="detachEvent",n.PREFIX="on")},event:function(a){var l={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:a.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){a.stopPropagation?a.stopPropagation():a.cancelBubble=!1}};return a.wheelDelta&&(l.deltaY=-1/40*a.wheelDelta),a.wheelDeltaX&&(l.deltaX=-1/40*a.wheelDeltaX),a.detail&&(l.deltaY=a.detail),l},delta:function(a){var l=0,d=0,m=0,I=0,y=0,b;return a.deltaY&&(m=a.deltaY*-1,l=m),a.deltaX&&(d=a.deltaX,l=d*-1),a.wheelDelta&&(l=a.wheelDelta),a.wheelDeltaY&&(m=a.wheelDeltaY),a.wheelDeltaX&&(d=a.wheelDeltaX*-1),a.detail&&(l=a.detail*-1),l===0?[0,0,0]:(I=Math.abs(l),(!r||I<r)&&(r=I),y=Math.max(Math.abs(m),Math.abs(d)),(!o||y<o)&&(o=y),b=l>0?"floor":"ceil",l=Math[b](l/r),d=Math[b](d/o),m=Math[b](m/o),[l,d,m])}},typeof t.define=="function"&&t.define.amd?t.define("hamster",[],function(){return n}):i.exports=n})(window,window.document)})(cn);const Pr=cn.exports;class Nr{setup(e){this.MIN_ZOOM=e.props.config.MIN_ZOOM,this.MAX_ZOOM=e.props.config.MAX_ZOOM,N.isMobile&&(this.MIN_ZOOM*=.5),this.canvas=e.canvas,this.ctx=e.ctx,this.props=e.props,this.layout=e.layout,this.rrId=e.rrUpdId,this.gridId=e.id,this.cursor={},this.oldMeta={},this.range=this.props.range,this.interval=this.props.interval,this.offsetX=0,this.offsetY=0,this.deltas=0,this.wmode=this.props.config.SCROLL_WHEEL,this.hub=Oe.instance(this.props.id),this.meta=Pe.instance(this.props.id),this.events=le.instance(this.props.id),this.listeners(),this.mouseEvents("addEventListener")}mouseEvents(e){["mousemove","mouseout","mouseup","mousedown"].forEach(t=>{e==="addEventListener"&&(this["_"+t]=this[t].bind(this)),this.canvas[e](t,this["_"+t])})}listeners(){this.hm=Pr(this.canvas),this.hm.wheel((n,r)=>this.mousezoom(-r*50,n));let e=this.mc=new Ue.Manager(this.canvas),t=N.isMobile?10:0;e.add(new Ue.Pan({threshold:t})),e.add(new Ue.Tap),e.add(new Ue.Pinch({threshold:0})),e.get("pinch").set({enable:!0}),N.isMobile&&e.add(new Ue.Press),e.on("panstart",n=>{if(this.cursor.scroll_lock)return;if(this.cursor.mode==="aim")return this.emitCursorCoord(n);let r=this.layout.scaleIndex,o=this.meta.getYtransform(this.gridId,r);this.drug={x:n.center.x+this.offsetX,y:n.center.y+this.offsetY,r:this.range.slice(),t:this.range[1]-this.range[0],o:o&&o.offset||0,y_r:o&&o.range?o.range.slice():void 0,B:this.layout.B,t0:N.now()},this.events.emit("cursor-locked",!0),this.events.emit("cursor-changed",{gridId:this.gridId,x:n.center.x+this.offsetX,y:n.center.y+this.offsetY})}),e.on("panmove",n=>{N.isMobile&&(this.calcOffset(),this.propagate("mousemove",this.touch2mouse(n))),this.drug?this.mousedrag(this.drug.x+n.deltaX,this.drug.y+n.deltaY):this.cursor.mode==="aim"&&this.emitCursorCoord(n)}),e.on("panend",n=>{N.isMobile&&this.drug&&this.panFade(n),this.drug=null,this.events.emit("cursor-locked",!1)}),e.on("tap",n=>{!N.isMobile||(this.simMousedown(n),this.fade&&this.fade.stop(),this.events.emit("cursor-changed",{}),this.events.emit("cursor-changed",{mode:"explore"}),this.events.emitSpec(this.rrId,"update-rr"))}),e.on("pinchstart",()=>{this.drug=null,this.pinch={t:this.range[1]-this.range[0],r:this.range.slice()}}),e.on("pinchend",()=>{this.pinch=null}),e.on("pinch",n=>{this.pinch&&this.pinchZoom(n.scale)}),e.on("press",n=>{!N.isMobile||(this.fade&&this.fade.stop(),this.calcOffset(),this.emitCursorCoord(n,{mode:"aim"}),setTimeout(()=>this.events.emitSpec(this.rrId,"update-rr")),this.simMousedown(n))});let s=this.canvas.addEventListener;s("gesturestart",this.gesturestart),s("gesturechange",this.gesturechange),s("gestureend",this.gestureend)}gesturestart(e){e.preventDefault()}gesturechange(e){e.preventDefault()}gestureend(e){e.preventDefault()}mousemove(e){N.isMobile||(this.events.emit("cursor-changed",{visible:!0,gridId:this.gridId,x:e.layerX,y:e.layerY}),this.calcOffset(),this.propagate("mousemove",e))}mouseout(e){N.isMobile||(this.events.emit("cursor-changed",{visible:!1}),this.propagate("mouseout",e))}mouseup(e){this.drug=null,this.events.emit("cursor-locked",!1),this.propagate("mouseup",e)}mousedown(e){N.isMobile||(this.events.emit("cursor-locked",!0),this.propagate("mousedown",e),!e.defaultPrevented&&this.events.emit("grid-mousedown",[this.gridId,e]))}simMousedown(e){e.srcEvent.defaultPrevented||(this.events.emit("grid-mousedown",[this.gridId,e]),this.propagate("mousemove",this.touch2mouse(e)),this.events.emitSpec(this.rrId,"update-rr"),this.propagate("mousedown",this.touch2mouse(e)),setTimeout(()=>{this.propagate("click",this.touch2mouse(e))}))}touch2mouse(e){return this.calcOffset(),{original:e.srcEvent,layerX:e.center.x+this.offsetX,layerY:e.center.y+this.offsetY,preventDefault:function(){this.original.preventDefault()}}}click(e){this.propagate("click",e)}emitCursorCoord(e,t={}){this.events.emit("cursor-changed",Object.assign({gridId:this.gridId,x:e.center.x+this.offsetX,y:e.center.y+this.offsetY},t))}panFade(e){let t=N.now()-this.drug.t0,n=42*(this.range[1]-this.drug.r[1])/t,r=Math.abs(n*.01);t>500||(this.fade&&this.fade.stop(),this.fade=new Or(o=>{n*=.85,Math.abs(n)<r&&o.stop(),this.range[0]+=n,this.range[1]+=n,this.changeRange()}))}calcOffset(){let e=this.canvas.getBoundingClientRect();this.offsetX=-e.x,this.offsetY=-e.y}mousezoom(e,t){if(this.wmode!=="pass"){if(this.wmode==="click"&&!this.oldMeta.activated)return;t.originalEvent.preventDefault(),t.preventDefault()}t.deltaX=t.deltaX||N.getDeltaX(t),t.deltaY=t.deltaY||N.getDeltaY(t),Math.abs(t.deltaX)>0&&(this.trackpad=!0,Math.abs(t.deltaX)>=Math.abs(t.deltaY)&&(e*=.1),this.trackpadScroll(t)),this.trackpad&&(e*=.032),e=N.smartWheel(e);let s=this.hub.mainOv.dataSubset;if(e<0&&s.length<=this.MIN_ZOOM||e>0&&s.length>this.MAX_ZOOM)return;let n=this.interval/1e3,r=e*n*s.length,o=this.props.config.ZOOM_MODE==="tl";if(t.originalEvent.ctrlKey||o){let a=t.originalEvent.offsetX/(this.canvas.width-1)*r,l=r-a;this.range[0]-=a,this.range[1]+=l}else this.range[0]-=r;if(o){let a=t.originalEvent.offsetY/(this.canvas.height-1)*2,l=2-a,d=r/(this.range[1]-this.range[0]);this.events.emit("rezoom-range",{gridId:this.gridId,z:d,diff1:a,diff2:l})}this.changeRange()}mousedrag(e,t){let s=this.drug.t*(this.drug.x-e)/this.layout.width,n=this.layout.$hi-this.layout.$lo;n*=(this.drug.y-t)/this.layout.height;let r=this.drug.o+n,o=this.layout.settings.logScale;if(o&&this.drug.y_r){let d=this.drug.y-t;var u=this.drug.y_r.slice();u[0]=te.exp((0-this.drug.B+d)/this.layout.A),u[1]=te.exp((this.layout.height-this.drug.B+d)/this.layout.A)}let a=this.layout.scaleIndex,l=this.meta.getYtransform(this.gridId,a);this.drug.y_r&&l&&!l.auto&&this.events.emit("sidebar-transform",{gridId:this.gridId,scaleId:a,range:o?u||this.drug.y_r:[this.drug.y_r[0]-r,this.drug.y_r[1]-r]}),this.range[0]=this.drug.r[0]+s,this.range[1]=this.drug.r[1]+s,this.changeRange()}pinchZoom(e){let t=this.hub.mainOv.dataSubset;if(e>1&&t.length<=this.MIN_ZOOM||e<1&&t.length>this.MAX_ZOOM)return;let s=this.pinch.t,n=s*1/e;this.range[0]=this.pinch.r[0]-(n-s)*.5,this.range[1]=this.pinch.r[1]+(n-s)*.5,this.changeRange()}trackpadScroll(e){let t=this.range[1]-this.range[0];this.range[0]+=e.deltaX*t*.011,this.range[1]+=e.deltaX*t*.011,this.changeRange()}changeRange(){let e=this.hub.mainOv.dataSubset;if(!this.range.length||e.length<2)return;let t=e.length-1,s=this.range;s[0]=N.clamp(s[0],-1/0,e[t][0]-this.interval*5.5),s[1]=N.clamp(s[1],e[0][0]+this.interval*5.5,1/0),this.events.emit("range-changed",s)}propagate(e,t){}destroy(){let e=this.canvas.removeEventListener;e("gesturestart",this.gesturestart),e("gesturechange",this.gesturechange),e("gestureend",this.gestureend),this.mc&&this.mc.destroy(),this.hm&&this.hm.unwheel(),this.mouseEvents("removeEventListener")}}class Rr extends Lt{constructor(e){super(e,"__$Crosshair__"),this.id=e,this.zIndex=1e6,this.ctxType="Canvas",this.overlay={draw:this.draw.bind(this),destroy:this.destroy.bind(this)},this.env={update:this.envEpdate.bind(this)}}draw(e){if(!this.layout)return;const t=this.props.cursor;!t.visible||(e.save(),e.strokeStyle=this.props.colors.cross,e.beginPath(),e.setLineDash([5]),t.gridId===this.layout.id&&(e.moveTo(0,t.y),e.lineTo(this.layout.width-.5,t.y)),e.moveTo(t.x,0),e.lineTo(t.x,this.layout.height),e.stroke(),e.restore())}envEpdate(e,t,s){this.ovSrc=e,this.layout=t,this.props=s}onCursor(e){this.props&&(this.props.cursor=e)}destroy(){}}class Dr extends Lt{constructor(e){super(e,"__$Grid__"),this.id=e,this.zIndex=-1e6,this.ctxType="Canvas",this.overlay={draw:this.draw.bind(this),destroy:this.destroy.bind(this)},this.env={update:this.envEpdate.bind(this)}}draw(e){let t=this.layout;if(!t)return;e.strokeStyle=this.props.colors.grid,e.beginPath();const s=t.height;for(var[n,r]of t.xs)e.moveTo(n-.5,0),e.lineTo(n-.5,s);for(var[o,u]of t.ys)e.moveTo(0,o-.5),e.lineTo(t.width,o-.5);e.stroke()}envEpdate(e,t,s){this.ovSrc=e,this.layout=t,this.props=s}destroy(){}}function Br(i,e,t,s,n){var r=t.ys;n.font=i.config.FONT;var{x:o,y:u,w:a,h:l}=un(i,e,s,n);n.fillStyle=i.colors.text,n.beginPath();for(var d of r){if(d[0]>e.height)continue;var m=s==="left"?a-.5:o-.5,I=s==="left"?m-4.5:m+4.5;n.moveTo(m,d[0]-.5),n.lineTo(I,d[0]-.5);var y=s==="left"?-10:10;n.textAlign=s==="left"?"end":"start";let b=t.prec;n.fillText(d[1].toFixed(b),m+y,d[0]+4)}n.stroke()}function un(i,e,t,s){var n=t==="right"?1:0,r=e.sbMax[n],o,u,a,l;switch(t){case"left":o=0,u=0,a=Math.floor(r),l=e.height,s.clearRect(o,u,a,l),s.strokeStyle=i.colors.scale,s.beginPath(),s.moveTo(o-.5+a,0),s.lineTo(o-.5+a,l),s.stroke();break;case"right":o=0,u=0,a=Math.floor(r),l=e.height,s.clearRect(o,u,a,l),s.strokeStyle=i.colors.scale,s.beginPath(),s.moveTo(o+.5,0),s.lineTo(o+.5,l),s.stroke();break}return{x:o,y:u,w:a,h:l}}function Lr(i,e,t,s,n){const r=i.config.PANHEIGHT;let u=(i.cursor.scales[t.scaleSpecs.id]||0).toFixed(t.prec);n.fillStyle=i.colors.panel;var a=s==="right"?1:0;let l=e.sbMax[a]-5,d=a?1:4,m=i.cursor.y-r*.5-.5,I=a?7:l-3;hn(n,d,m,l,r,3,a),n.fillStyle=i.colors.textHL,n.textAlign=a?"left":"right",n.fillText(u,I,m+15)}function Ur(i,e,t,s,n,r){const o=Math.floor(i.config.PANHEIGHT*.8);let a=r.value.toFixed(t.prec);n.fillStyle=r.color;var l=s==="right"?1:0;let d=e.sbMax[l]-5,m=l?1:4,I=r.y-o*.5-.5,y=l?7:d-3;hn(n,m,I,d,o,3,l),n.fillStyle=i.colors.back,n.textAlign=l?"left":"right",n.fillText(a,y,I+o-4)}function hn(i,e,t,s,n,r,o){s<2*r&&(r=s/2),n<2*r&&(r=n/2),i.beginPath(),i.moveTo(e+r,t),i.arcTo(e+s,t,e+s,t+n,r*o),i.arcTo(e+s,t+n,e,t+n,r*o),i.arcTo(e,t+n,e,t,r*(1-o)),i.arcTo(e,t,e+s,t,r*(1-o)),i.closePath(),i.fill()}function fn(i,e,t){t.strokeStyle=i.colors.scale,t.beginPath(),t.moveTo(0,.5),t.lineTo(e.width,.5),t.stroke()}function Fr(i,e,t,s){var n=t==="right"?1:0,r=e.sbMax[n];s.font=i.config.FONT,un(i,e,t,s),e.id&&fn(i,e,s);let o=Math.floor(r*.5),u=Math.floor(e.height*.5);s.fillStyle=i.colors.text,s.textAlign="center",s.fillText("Error",o,u)}const _t={body:Br,panel:Lr,upperBorder:fn,error:Fr,tracker:Ur};function Gr(i,e,t){e.strokeStyle=t.color,e.setLineDash([1,2]),e.beginPath(),e.moveTo(0,t.y),e.lineTo(i.width,t.y),e.stroke(),e.setLineDash([])}class Hr extends Lt{constructor(e,t,s){super(e,"__$Trackers__"),this.id=e,this.zIndex=5e5,this.ctxType="Canvas",this.hub=Oe.instance(t.id),this.meta=Pe.instance(t.id),this.gridId=s,this.props=t,this.overlay={draw:this.draw.bind(this),destroy:this.destroy.bind(this),drawSidebar:this.drawSidebar.bind(this)},this.env={update:this.envEpdate.bind(this)}}draw(e){if(!this.layout)return;let t=this.meta.valueTrackers[this.gridId]||[];this.trackers=[];for(var s=0;s<t.length;s++){let n=t[s];if(!n)continue;let r=this.hub.ovData(this.gridId,s)||[],o=r[r.length-1]||[],u=n(o);u.ovId=s,u.show&&(u.y=this.layout.value2y(u.value),u.color=u.color||this.props.colors.scale,u.line&&Gr(this.layout,e,u),this.trackers.push(u))}}drawSidebar(e,t,s){if(!!this.layout)for(var n of this.trackers||[])this.getScaleId(n.ovId)===s.scaleSpecs.id&&_t.tracker(this.props,this.layout,s,t,e,n)}envEpdate(e,t,s){this.ovSrc=e,this.layout=t,this.props=s,this.scaleId=this.getScaleId()}getScaleId(e){let t=this.layout.scales;for(var s in t)if(t[s].scaleSpecs.ovIdxs.includes(e))return s}destroy(){}}function Vr(i,e,t){let s=document.getElementById(i),n=window.devicePixelRatio||1;s.style.width=`${e}px`,s.style.height=`${t}px`,n<1&&(n=1);var r=s.getBoundingClientRect();s.width=r.width*n,s.height=r.height*n;let o=s.getContext("2d",{});o.scale(n,n),o.measureTextOrg||(o.measureTextOrg=o.measureText);let u=i.split("-").shift();return o.measureText=a=>N.measureText(o,a,u),[s,o]}function Xr(i,e,t,s){let n=window.devicePixelRatio||1;i.style.width=`${t}px`,i.style.height=`${s}px`,n<1&&(n=1);var r=i.getBoundingClientRect();i.width=r.width*n,i.height=r.height*n,e.scale(n,n)}const ht={setup:Vr,resize:Xr};function jr(i){let e,t;return{c(){e=Q("div"),t=Q("canvas"),x(t,"id",i[2]),x(e,"id",i[1]),x(e,"style",i[0]),x(e,"class","nvjs-canvas-rendrer svelte-8n0n7w")},m(s,n){Z(s,e,n),ie(e,t)},p(s,[n]){n&1&&x(e,"style",s[0])},i:W,o:W,d(s){s&&q(e)}}}function zr(i,e,t){let s,n,r,{id:o}=e,{props:u={}}=e,{rr:a={}}=e,{layout:l={}}=e,d=le.instance(u.id),m=`rr-${o}-${a.id}`,I=`${u.id}-rr-${o}-${a.id}`,y=`${u.id}-canvas-${o}-${a.id}`;d.on(`${m}:update-rr`,L),d.on(`${m}:run-rr-task`,F);let b,p,g;Ke(()=>{P()}),ut(()=>{d.off(`${m}`),g&&g.destroy()});function A(O){g=O,g.setup({id:o,canvas:b,ctx:p,props:u,layout:l,rrUpdId:m})}function Y(){g&&(g.destroy(),g=null)}function E(){return g}function P(){[b,p]=ht.setup(y,l.width,l.height),L()}function L(O=l){t(3,l=O),!(!p||!l)&&(p.clearRect(0,0,b.width,b.height),a.layers.forEach(J=>{if(!J.display)return;p.save();let H=J.overlay;J.opacity&&(p.globalAlpha=J.opacity),H.draw(p),p.globalAlpha=1,p.restore()}),o>0&&M())}function F(O){O.handler(b,p,g)}function M(){p.strokeStyle=u.colors.scale,p.beginPath(),p.moveTo(0,.5),p.lineTo(l.width,.5),p.stroke()}function R(){!b||(ht.resize(b,p,l.width,l.height),L())}return i.$$set=O=>{"id"in O&&t(4,o=O.id),"props"in O&&t(5,u=O.props),"rr"in O&&t(6,a=O.rr),"layout"in O&&t(3,l=O.layout)},i.$$.update=()=>{i.$$.dirty&8&&t(0,s=`
    left: ${l.sbMax[0]}px;
    top: ${l.offset||0}px;
    position: absolute;
    height: ${l.height}px;
}`),i.$$.dirty&8&&t(11,n=l.width),i.$$.dirty&8&&t(10,r=l.height),i.$$.dirty&3072&&R()},[s,I,y,l,o,u,a,A,Y,E,r,n]}class qr extends be{constructor(e){super(),ye(this,e,zr,jr,de,{id:4,props:5,rr:6,layout:3,attach:7,detach:8,getInput:9})}get attach(){return this.$$.ctx[7]}get detach(){return this.$$.ctx[8]}get getInput(){return this.$$.ctx[9]}}function dn(i,e,t){const s=i.slice();return s[20]=e[t],s[21]=e,s[22]=t,s}function pn(i){let e,t=i[21],s=i[22],n;const r=()=>i[7](e,t,s),o=()=>i[7](null,t,s);let u={id:i[1],layout:i[0],props:i[2],rr:i[20]};return e=new qr({props:u}),r(),{c(){ge(e.$$.fragment)},m(a,l){ue(e,a,l),n=!0},p(a,l){(t!==a[21]||s!==a[22])&&(o(),t=a[21],s=a[22],r());const d={};l&2&&(d.id=a[1]),l&1&&(d.layout=a[0]),l&4&&(d.props=a[2]),l&8&&(d.rr=a[20]),e.$set(d)},i(a){n||(U(e.$$.fragment,a),n=!0)},o(a){X(e.$$.fragment,a),n=!1},d(a){o(),he(e,a)}}}function gn(i){let e,t,s=i[20].ctxType==="Canvas"&&pn(i);return{c(){s&&s.c(),e=Je()},m(n,r){s&&s.m(n,r),Z(n,e,r),t=!0},p(n,r){n[20].ctxType==="Canvas"?s?(s.p(n,r),r&8&&U(s,1)):(s=pn(n),s.c(),U(s,1),s.m(e.parentNode,e)):s&&(Ae(),X(s,1,1,()=>{s=null}),_e())},i(n){t||(U(s),t=!0)},o(n){X(s),t=!1},d(n){s&&s.d(n),n&&q(e)}}}function Wr(i){let e,t,s=i[3],n=[];for(let o=0;o<s.length;o+=1)n[o]=gn(dn(i,s,o));const r=o=>X(n[o],1,1,()=>{n[o]=null});return{c(){e=Q("div");for(let o=0;o<n.length;o+=1)n[o].c();x(e,"class","nvjs-grid svelte-1ctdodr"),x(e,"style",i[4])},m(o,u){Z(o,e,u);for(let a=0;a<n.length;a+=1)n[a].m(e,null);t=!0},p(o,[u]){if(u&15){s=o[3];let a;for(a=0;a<s.length;a+=1){const l=dn(o,s,a);n[a]?(n[a].p(l,u),U(n[a],1)):(n[a]=gn(l),n[a].c(),U(n[a],1),n[a].m(e,null))}for(Ae(),a=s.length;a<n.length;a+=1)r(a);_e()}(!t||u&16)&&x(e,"style",o[4])},i(o){if(!t){for(let u=0;u<s.length;u+=1)U(n[u]);t=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)X(n[u]);t=!1},d(o){o&&q(e),ct(n,o)}}}function Zr(i,e,t){let s,{id:n}=e,{props:r}=e,{main:o}=e,{layout:u}=e;function a(){return y}let l=Oe.instance(r.id),d=Pe.instance(r.id),m=le.instance(r.id),I=pi.instance(r.id),y=[],b=[],p=null;m.on(`grid-${n}:update-grid`,P),m.on(`grid-${n}:remake-grid`,g),m.on(`grid-${n}:run-grid-task`,L),Ke(()=>{g()});function g(M){if(!l.panes()[n])return;y=Y(),t(3,b=E());let R=b[b.length-1];R&&setTimeout(()=>{R.ref&&(A(),R.ref.attach(p=new Nr))})}function A(){for(var M of b)M.ref.detach()}function Y(){let M=l.panes()[n].overlays||[],R=[];for(var O=0;O<M.length;O++){let J=M[O],H=I.prefabs[J.type];if(!H)continue;let k=new Lt(O,J.name,r.id),_=J.settings.zIndex;k.zIndex=_!=null?_:J.main?0:-1;let T=new Cr(O,J,u,r);k.overlay=H.make(T),k.env=T,k.ovSrc=J,k.ctxType=H.ctx,T.overlay=k.overlay,d.exctractFrom(k.overlay),R.push(k),k.overlay.init()}return R.push(new Rr(O++)),R.push(new Dr(O++)),R.push(new Hr(O++,r,n)),R.sort((J,H)=>J.zIndex-H.zIndex),d.finish(),R}function E(){let M=[],R=null;for(var O of y){if(O.ctxType!==R){var J={ctxType:O.ctxType,layers:[],id:M.length,ref:null};M.push(J),R=O.ctxType}J.layers.push(O)}return M}function P(M=u){t(0,u=M),p&&(p.layout=u);for(var R of y)R.env.update(R.ovSrc,u,r),R.update();for(var O of b)m.emitSpec(`rr-${n}-${O.id}`,"update-rr",u)}function L(M){M.handler(y,b,{update:P})}function F(M,R,O){xe[M?"unshift":"push"](()=>{R[O].ref=M,t(3,b)})}return i.$$set=M=>{"id"in M&&t(1,n=M.id),"props"in M&&t(2,r=M.props),"main"in M&&t(5,o=M.main),"layout"in M&&t(0,u=M.layout)},i.$$.update=()=>{i.$$.dirty&5&&t(4,s=`
    width: ${u.width}px;
    height: ${u.height}px;
    background: ${r.colors.back};
    margin-left: ${u.sbMax[0]}px;
`)},[u,n,r,b,s,o,a,F]}class Qr extends be{constructor(e){super(),ye(this,e,Zr,Wr,de,{id:1,props:2,main:5,layout:0,getLayers:6})}get getLayers(){return this.$$.ctx[6]}}function mn(i,{delay:e=0,duration:t=400,easing:s=ve}={}){const n=+getComputedStyle(i).opacity;return{delay:e,duration:t,easing:s,css:r=>`opacity: ${r*n}`}}function Kr(i){gt(i,"svelte-16w6gr6",".scale-selector.svelte-16w6gr6{position:absolute;bottom:5px;display:grid;justify-content:center;align-content:center}.scale-button.svelte-16w6gr6{border-radius:3px;text-align:center;user-select:none;margin:auto;margin-top:1px}.scale-button.svelte-16w6gr6:hover{filter:brightness(1.2)}")}function vn(i,e,t){const s=i.slice();s[13]=e[t],s[15]=t;const n=s[13].scaleSpecs.id;return s[1]=n,s}function In(i){let e,t=i[1]+"",s,n,r,o,u;function a(){return i[10](i[1])}return{c(){e=Q("div"),s=Ze(t),n=Ie(),x(e,"class","scale-button svelte-16w6gr6"),x(e,"style",r=i[2](i[1]))},m(l,d){Z(l,e,d),ie(e,s),ie(e,n),o||(u=Qe(e,"click",fs(a)),o=!0)},p(l,d){i=l,d&1&&t!==(t=i[1]+"")&&Mt(s,t),d&5&&r!==(r=i[2](i[1]))&&x(e,"style",r)},d(l){l&&q(e),o=!1,u()}}}function $r(i){let e,t,s,n=i[0],r=[];for(let o=0;o<n.length;o+=1)r[o]=In(vn(i,n,o));return{c(){e=Q("div");for(let o=0;o<r.length;o+=1)r[o].c();x(e,"class","scale-selector svelte-16w6gr6"),x(e,"id",i[4]),x(e,"style",i[3])},m(o,u){Z(o,e,u);for(let a=0;a<r.length;a+=1)r[a].m(e,null);s=!0},p(o,[u]){if(u&37){n=o[0];let a;for(a=0;a<n.length;a+=1){const l=vn(o,n,a);r[a]?r[a].p(l,u):(r[a]=In(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}(!s||u&8)&&x(e,"style",o[3])},i(o){s||(yt(()=>{t||(t=Li(e,mn,{duration:150},!0)),t.run(1)}),s=!0)},o(o){t||(t=Li(e,mn,{duration:150},!1)),t.run(0),s=!1},d(o){o&&q(e),ct(r,o),o&&t&&t.end()}}}function eo(i,e,t){let s,n,r,{id:o}=e,{props:u}=e,{layout:a}=e,{scales:l}=e,{side:d}=e,m=le.instance(u.id),I=d==="right"?1:0,y=`${u.id}-ss-${o}-${d}`;function b(g){l[g];let A=a.settings.scaleSideIdxs;A[I]=g,m.emitSpec("hub","set-scale-index",{paneId:o,index:g,sideIdxs:A})}const p=g=>b(g);return i.$$set=g=>{"id"in g&&t(1,o=g.id),"props"in g&&t(6,u=g.props),"layout"in g&&t(7,a=g.layout),"scales"in g&&t(0,l=g.scales),"side"in g&&t(8,d=g.side)},i.$$.update=()=>{i.$$.dirty&129&&t(9,s=function(){let A={},Y=a.sbMax[I];switch(l.length){case 2:case 4:default:A.ssw=46,A.ssm=(Y-A.ssw)/2,A.bw=18,A.bh=18,A.tmp="50% 50%";break;case 3:A.ssw=54,A.ssm=(Y-A.ssw)/3,A.bw=15,A.bh=15,A.tmp="33% 33% 33%";break}return A}()),i.$$.dirty&576&&t(3,n=`
    grid-template-columns: ${s.tmp};
    font: ${u.config.FONT};
    width: ${s.ssw}px;
    margin-left: ${s.ssm}px;
`),i.$$.dirty&704&&t(2,r=g=>{let Y=g===a.settings.scaleSideIdxs[I]?u.colors.text:u.colors.scale;return`
    background: ${u.colors.back};
    line-height: ${s.bh}px;
    width: ${s.bw}px;
    height: ${s.bh}px;
    box-shadow: 0 0 0 1px ${u.colors.back};
    border: 1px solid ${Y};
    color: ${Y};
`})},[l,o,r,n,y,b,u,a,d,s,p]}class to extends be{constructor(e){super(),ye(this,e,eo,$r,de,{id:1,props:6,layout:7,scales:0,side:8},Kr)}}function yn(i){let e,t;return e=new to({props:{id:i[1],props:i[2],layout:i[0],scales:i[4],side:i[3]}}),{c(){ge(e.$$.fragment)},m(s,n){ue(e,s,n),t=!0},p(s,n){const r={};n[0]&2&&(r.id=s[1]),n[0]&4&&(r.props=s[2]),n[0]&1&&(r.layout=s[0]),n[0]&16&&(r.scales=s[4]),n[0]&8&&(r.side=s[3]),e.$set(r)},i(s){t||(U(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function io(i){let e,t,s,n,r,o,u=i[4].length>1&&i[5]&&yn(i);return{c(){e=Q("div"),t=Q("canvas"),s=Ie(),u&&u.c(),x(t,"id",i[8]),x(e,"id",i[7]),x(e,"style",i[6]),x(e,"class","nvjs-sidebar svelte-gpuvhh")},m(a,l){Z(a,e,l),ie(e,t),ie(e,s),u&&u.m(e,null),n=!0,r||(o=[Qe(e,"click",i[9]),Qe(e,"mouseover",i[10]),Qe(e,"mouseleave",i[11])],r=!0)},p(a,l){a[4].length>1&&a[5]?u?(u.p(a,l),l[0]&48&&U(u,1)):(u=yn(a),u.c(),U(u,1),u.m(e,null)):u&&(Ae(),X(u,1,1,()=>{u=null}),_e()),(!n||l[0]&64)&&x(e,"style",a[6])},i(a){n||(U(u),n=!0)},o(a){X(u),n=!1},d(a){a&&q(e),u&&u.d(),r=!1,Ve(o)}}}function no(i,e,t){let s,n,r,o,{id:u}=e,{props:a={}}=e,{layout:l={}}=e,{side:d}=e,{scales:m=[]}=e,I=[];function y(G){I=G}let b=Pe.instance(a.id),p=le.instance(a.id),g=d==="right"?1:0,A=`sb-${u}-${d}`,Y=`${a.id}-sb-${u}-${d}`,E=`${a.id}-sb-canvas-${u}-${d}`,P=!1;p.on(`${A}:update-sb`,_);let L,F,M,R=1,O,J;Ke(()=>{H()}),ut(()=>{p.off(`${A}`),M&&M.destroy()});function H(){[L,F]=ht.setup(E,l.sbMax[g],l.height),_(),n&&k()}function k(){M=new Ue.Manager(L),M.add(new Ue.Pan({direction:Ue.DIRECTION_VERTICAL,threshold:0})),M.add(new Ue.Tap({event:"doubletap",taps:2,posThreshold:50})),M.on("panstart",G=>{if(!n)return;let se=$();se?R=se.zoom:R=1,O=[n.$hi,n.$lo],J={y:G.center.y,z:R,mid:te.log_mid(O,l.height),A:n.A,B:n.B}}),M.on("panmove",G=>{J&&(R=B(G),p.emit("sidebar-transform",{gridId:u,scaleId:n.scaleSpecs.id,zoom:R,auto:!1,range:z(),drugging:!0,updateLayout:!0}),_())}),M.on("panend",()=>{J=null,n&&p.emit("sidebar-transform",{gridId:u,scaleId:n.scaleSpecs.id,drugging:!1,updateLayout:!0})}),M.on("doubletap",()=>{p.emit("sidebar-transform",{gridId:u,scaleId:n.scaleSpecs.id,zoom:1,auto:!0,updateLayout:!0}),R=1,_()})}function _(G=l){if(!!G){if(t(0,l=G),n=V(),!n)return _t.error(a,l,d,F);_t.body(a,l,n,d,F),T(),u&&_t.upperBorder(a,l,F),a.cursor.y&&a.cursor.scales&&a.cursor.gridId===l.id&&_t.panel(a,l,n,d,F)}}function T(){for(var G of I){let se=G.overlay;se.drawSidebar&&se.drawSidebar(F,d,n)}}function w(){!L||(ht.resize(L,F,l.sbMax[g],l.height),_())}function B(G){let se=J.y-G.center.y,ze=1+(se>0?3:1)*se/l.height;return N.clamp(J.z*ze,.005,100)}function z(G=1,se=1){let we=R/J.z,ze=(1/we-1)/2,D=O.slice(),me=D[0]-D[1];if(!n.log)D[0]=D[0]+me*ze*G,D[1]=D[1]-me*ze*se;else{let ee=l.height/2,ce=ee-ee*(1/we),ft=ee+ee*(1/we),qe=st=>te.exp((st-J.B)/J.A);D.slice(),D[0]=qe(ce),D[1]=qe(ft)}return D}function V(){let G=l.scales,se=l.settings.scaleTemplate[g],we=G[l.settings.scaleSideIdxs[g]];return we&&se.includes(we.scaleSpecs.id)?we:null}function $(){if(!b.yTransforms[u])return;let G=n.scaleSpecs.id;return b.yTransforms[u][G]}function ne(G){!n||p.emitSpec("hub","set-scale-index",{paneId:u,index:n.scaleSpecs.id,sideIdxs:l.settings.scaleSideIdxs})}function Me(){t(5,P=!0)}function ae(){t(5,P=!1)}return i.$$set=G=>{"id"in G&&t(1,u=G.id),"props"in G&&t(2,a=G.props),"layout"in G&&t(0,l=G.layout),"side"in G&&t(3,d=G.side),"scales"in G&&t(4,m=G.scales)},i.$$.update=()=>{i.$$.dirty[0]&5&&t(6,s=`
    left: ${g*(l.width+l.sbMax[0])}px;
    top: ${l.offset||0}px;
    position: absolute;
    background: ${a.colors.back};
    height: ${l.height}px;
`),i.$$.dirty[0]&1&&(n=V()),i.$$.dirty[0]&1&&t(14,r=l.width),i.$$.dirty[0]&1&&t(13,o=l.height),i.$$.dirty[0]&24576&&w()},[l,u,a,d,m,P,s,Y,E,ne,Me,ae,y,o,r]}class bn extends be{constructor(e){super(),ye(this,e,no,io,de,{id:1,props:2,layout:0,side:3,scales:4,setLayers:12},null,[-1,-1])}get setLayers(){return this.$$.ctx[12]}}function An(i){let e;return{c(){e=Q("div"),x(e,"id",i[3]),x(e,"style",i[1]),x(e,"class","nvjs-sidebar-stub svelte-yr5ja6")},m(t,s){Z(t,e,s)},p(t,s){s&2&&x(e,"style",t[1])},d(t){t&&q(e)}}}function so(i){let e,t=i[0].sbMax[i[2]]&&An(i);return{c(){t&&t.c(),e=Je()},m(s,n){t&&t.m(s,n),Z(s,e,n)},p(s,[n]){s[0].sbMax[s[2]]?t?t.p(s,n):(t=An(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:W,o:W,d(s){t&&t.d(s),s&&q(e)}}}function ro(i,e,t){let s,{id:n}=e,{props:r={}}=e,{layout:o={}}=e,{side:u}=e,a=u==="right"?1:0,l=`${r.id}-stub-${n}-${u}`;return i.$$set=d=>{"id"in d&&t(4,n=d.id),"props"in d&&t(5,r=d.props),"layout"in d&&t(0,o=d.layout),"side"in d&&t(6,u=d.side)},i.$$.update=()=>{i.$$.dirty&113&&t(1,s=`
    left: ${a*(o.width+o.sbMax[0])}px;
    top: ${o.offset||0}px;
    width: ${o.sbMax[a]-1}px;
    height: ${o.height-(n?1:0)}px;
    position: absolute;
    border: 1px solid;
    border-${u}: none;
    border-bottom: none;
    /* TODO: remove to-boder, it's in the pane now */
    border-top: ${n?"auto":"none"};
    border-color: ${r.colors.scale};
    background: ${r.colors.back}
`)},[o,s,a,l,n,r,u]}class _n extends be{constructor(e){super(),ye(this,e,ro,so,de,{id:4,props:5,layout:0,side:6})}}const gi={"open-eye":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAelQTFRFAAAAmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYMxdw0QAAAKN0Uk5TAB1Pq7bV/v/5xZFHCw6h6NOCOQMRbNGwTgdo7PPOlIAlJDOSoNr7w0FL1+ubRRgCIVqz/CIKkPbpexsBPOFcJ/WDCBm5mULqye/BYocVtyxQDDIFjCpyslXi8j70d17PH5cEU+54V4anWUmeUmuatBS4c6ac58cgW/1Gsc0PE+Znn+S1Ott9LfAaEmlRFi+kxiNUNEhtK7p6nUzWcWEu2aKt90TEJrgAAALFSURBVHic7VZrWxJBFF5pdbxkRWkKSolGRYmhZBkYoWSIRaFkXjIx7GIWXSktzS6opVlJZvf7L+3MLpszuzvL9jz1bd8vMO8579mZMzPnDMcZMGDgPyPPtI7PL0CosIgvLln/l+JS04aNiMIm8+YtuuVl5VuRCioqLbrkFmuV4F9t27a9xg6ordvh2ClQu3br0Dv3YNe99a4GgtznbmzCtIffn0PefOAg+LUc8iosvtZ6PI3Dfk39ERv4BNra1a3Bo3gWHc1s/bEQOHS62Q7OMDh0NbDMxwPw+ROaU4ychAiOU+pGK9jCUTnb3RMkh7HTkIlAr5r+TCFC+cokt3dW97mIsa8f5jlQq9T3DIJeLfJZhIbOxQhiGCLEu+VuvZCe0IjazDh8As4nCGIUCF6+F7B/FyKqem4Yb95FkrkExGXaaQwyc0Vdz43jAAHqaF0F5hpJmIBIMvRiAHSdpCw3IGTZ2vgmJOBWTC6UcFsIEKY4Lxy5O2vDFEJ3R1h67p54mycocvI+QqPS4AFcICtT78+Wg3GankJo+mH2vyugEWCmhRkgLgXAS3hEL+HxkxnhN+F8KhUkegl+cgmcF5KYppI4i+bmn9nt/WMFkv45pV+AJFYQ4yh4lFMeVfKK2EFaLWnYxkWSwQdpkiReyPTKg7REfZCLw1F+SRJddIBcR5l7BTsRIi/DxACpf01eJnw0lxWFTXGdI00eSa7nOmcLSoYgYkmbsAdDdEF5gwvKilKvWtIyb1eTK3pLWraoypNDI5LGRfUdy1yJy3pao/k4Hbis17AdxMZiZjTR4HuckpRGY4HWVoxbW+jDgtLU+tGTu7UBPn0WmmuKaq4+d2Of0FzTGabwDyzz4j0YXP7yFXd3+7dV83exvU8v5ZZjLKo/MKZ0PjAwSk0/FE+c2URuHYW86E8ePzZ+FfF1JZqZN2DAwL/Ab6ixeYt2jKORAAAAAElFTkSuQmCC","closed-eye":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAblQTFRFAAAAmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYZNB/+AAAAJN0Uk5TAB1Pq7bV/v/5xZFHCw6h6NOCOQMRbNGwTgdo7PPOlIAlJDOSoNr7w0FL1+ubRRgCIVqz/CIKkPbpexsBPOFcJ/WDCBm5mULqye/BYocVtyxQBYwqclXiMvLkrF7PDB/9U+5XhqdZnlJrtBS4ppznW0axzQ/mtRoSURYvScYjMFQ0K7p6nUzWsn1xYS5t2aI6BK33FoqWFQAAAl5JREFUeJxjYBgFo2AU0BgwMjGzsLKxs3NwsnBx85ComZeJj58dBQgICgkTrV1EVIwdCxCXkCRKu6SUNFi9jKycvIIiECgpq6iqgYXUNYjQr6kFUqqto6uHJKhvYGgEEjZmMSGg3dTMHKjOwtIKQ8baRgfkDFs7vPrtZYFqHBydsMs6u4Bc4WqKW7+bO1CBhwFuBZqeQAVeerikvR2A1vvgdaKvH9AEVX/sklJAOc8AvPoZGAKDgCHhEIxNKoSDnZ2VUCADAzMU6M4wJUyJ8AigfgyTmSOjrNHFooEmxMSiiwYDg8c9DsPYeHZ2DAMYEoB+ZUGPC2D8JfpiugurAQxJQBOSUYVSgCGTiqkShwEMaUAT0pEFmIACGVgU4jJAMhNooQiCnwUMgOxAEgxgsAImuRwEN5edPQ8zAPEZwJAPlEmAcQqAGUgKqzLcBjAUsrMXFUPZug7kGRADMwDkhRISvWCH7AUGK2AglpIUiGXAQBRH4gcAo1GUBAMkS4HRWI4sAkpI+cQbAEpIFahCMcCkXEmsAViSMkMVMCbcMTMDVgOqgfprMAo27NkZmwHYszO0QKlFE3Suc0YTsa4HFSgNmPopL9KghSp64KAC31JQodqIS1oCVKyX4ikXNVVBxboCbgWQikUQRyXq3ASqWHLxVCzAqo0LVLW5N5dhStm0GBOu2oCgtQ1cueaiVK7WBobt4Mq1FD2asADJDkj1HlHT2QWq3RW7ewR7IdV7UQVh7SBQjr2BUUhkAwMEeJn6MJo4/ROI1g4BjAETWUCNjUmcLMrceEN+FIyCUUANAAAY0GNbcYUV2AAAAABJRU5ErkJggg==",king:"data:image/png;base64,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",king2:"data:image/png;base64,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",king3:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAABVxJREFUeJztmlmoVlUUx/30XjVLnFC0bJTsWlmZQwRlYlE+FIR2jQzRBpSISooGobKi0aLoRlSEUolU0EMDRQ9JUdFgiA9NFA0oDTfLVTaZZdb/39oXD/tb55x9vnvOPUp7wQ/u/c4e1lpnT2et3a9flChRokSJEiVKlChRokSJEiVKxSJdHYPBTeBD8BfYBb4ED4FRdetXqcDAA8BH4J8UtoDpdetZicCwQeD9DON7EDC+bn1LFxh1SYDxPayqW99SBQbtB34wDH0FPOHWgeTvf4OJdetdmsCYqwzjXwQN9/wO4/nDYEDduvdaYMT+YKNn3HYwNVFmJPjaK8P/Z9SpeykCI64Df3rGPWOUu8EYBatBWx16lyJQ/kBj5f8NTDbKDgObvbLd4KS+VroBjgAXgtvBrWAx6Cg6J1F+hTvsJI1am1H+amMUrAHtBfUfD+aLHrjuApdxyuW2gwJDwDLwlaEIT2uXg6GBihwGPvba+JnOzajD3eILr873YHZgn+2gE2xwO0mynW3gXjA6rXJ/8LixJSXh23wU7JujSMN15rfVFWDEIqPf58HAnHpt4Fo3xbLOGOvpaKuBTsNraU7oylqc8OxYsMmr92Oq95sN8dcNjpx5GXUabpj/EqA/ucdq5E2jIA8vW43fd7jp0LQmOGUeMN7+yjzjE23MN+q/DPZJ6W+Oc7CvJ4e9v73+Z5fVqT90PgETwJQU53AvvwD099qZJs1rCB05vIADBojO42Qbv4LzjLIzwXeGflyzTgXjwNP+c6tTv4EViWeTDIV6lOrscYJ7G48Yb695yOU7YanRDo/O7Yky0w1nk2/ALNl90jy7FQcs955zG3zDKMf5ebHoIjpRdNVOPv8cHNmCA0aDdcaom+Oez5bmcwP5DJySHJn4+6xeO8CV4eL2nlGW68T5okEN/9n10uKZHvXOleZzxGvgNGeo3xcdcoY0T8vSHMAhPgN8YJTnImStI6n7foADRokufv4C3G303+2GurUwl+MAV45DfaYx1C2uafXtJ/qb64zO6ud3sEBStuZSHZBwwjzwU4ZSjPlN6I3xrq8R4IWMfv4QPUKnHpRKd4Arz61qoaQfPpb5c7FVcQZsN/rgVybP+4MD6pfrgES9uW4IJuvyuDmuRXutPviNssbrY6foAtsIqF+dA1zdxW4osh737kUFbQzp42TZvcjyyL4ydH2p3AGu/hLwqehWGHzqK9D+QDfX+bV4pxT7RK7eAXuyRAdEB3Sc+X93wKzogOiA6IDogOiA6IBiDritBl0rEdEoUa4D/M9axub3+js7oneSVoc44HVjFDwnGhEu5bu+r0U0R3ifNEeXt1qFGdTcaTiBX3jLwTFgSA12FBLRr0ZGp3klZ71hD7nfqsiA52MpFQhzAMwN3AxOEA1b1z4ynN4Mmx0nehOFofusUN07qS9SNPLylOTnCBmk3OQ6uxuc40bIQWC4VHCpQTQEN9QN66NEv/BuEc0dMPdghcx83gZj8jridTbG87YENOg7hXUYr+eVmJdEM8kcMZeKxvhPByeK5uqPB5MdU9xv01wZOpQBFoa8HhTNDjMfwTB7d6CxSZi8YbZ6WBGP821yAflWslPmrbLLOW1HwIhrFSZs1oKjezP0eM3lIvCqaBKyKmXLciqN5jy/EhwuAUHTUEe0OWfwVHWF6IL5rujNzroMZvqb0+1J0SQMDzyHgkGlGJ3jEF5HGSu6IDFXxztFN4pmh58VTanzXjAztaEXF5Iw1M75znn/lmhyZJXomrLUGcv1g/ePM/MCfSqiWSPe9eE2ebDonkxFpxaEuwoz0oeAMaI7wN5/cXJPk38Bz1zMtWby+i0AAAAASUVORK5CYII="};function oo(i){gt(i,"svelte-1cdflqk",".nvjs-eye.svelte-1cdflqk{width:20px;height:20px;float:right;margin-right:2px;margin-left:7px}.nvjs-eye.svelte-1cdflqk:hover{filter:brightness(1.25)}")}function lo(i){let e,t,s;return{c(){e=Q("div"),x(e,"class","nvjs-eye svelte-1cdflqk"),x(e,"style",i[0])},m(n,r){Z(n,e,r),t||(s=Qe(e,"click",i[1]),t=!0)},p(n,[r]){r&1&&x(e,"style",n[0])},i:W,o:W,d(n){n&&q(e),t=!1,s()}}}function ao(i,e,t){let s,n,r,{gridId:o}=e,{ov:u}=e,{props:a}=e,{height:l}=e,d=le.instance(a.id);function m(){t(7,s=u.settings.display!==!1)}function I(){d.emitSpec("hub","display-overlay",{paneId:o,ovId:u.id,flag:u.settings.display===void 0?!1:!u.settings.display})}return i.$$set=y=>{"gridId"in y&&t(2,o=y.gridId),"ov"in y&&t(3,u=y.ov),"props"in y&&t(4,a=y.props),"height"in y&&t(5,l=y.height)},i.$$.update=()=>{i.$$.dirty&8&&t(7,s=u.settings.display!==!1),i.$$.dirty&128&&t(8,n=s?"open":"closed"),i.$$.dirty&288&&t(0,r=`
    background-image: url(${gi[n+"-eye"]});
    background-size: contain;
    background-repeat: no-repeat;
    margin-top: ${(l-20)*.5-3}px;
    /* FIX 'overflow: hidden' changes baseline */
    margin-bottom: -2px;
`)},[r,I,o,u,a,l,m,s,n]}class co extends be{constructor(e){super(),ye(this,e,ao,lo,de,{gridId:2,ov:3,props:4,height:5,update:6},oo)}get update(){return this.$$.ctx[6]}}const uo=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVQAAAC0CAMAAAD8fySxAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAvpQTFRFAAAA///////////////+/////////////////////////////v/////////////////////////////////////////////////////////////////////////////////+//////////7////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7////////+///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+///////////+//////////////////////////////////7////+////poUcigAAAP50Uk5TAD1AGUAtKyYkC/+5/5qTrNlmOjU5b2nMT+EDZMFjRT//7MT/aI+NGhUIM+YFusm38+0s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"];function ho(i){gt(i,"svelte-5spisq",".nvjs-legend-line.svelte-5spisq{pointer-events:all;position:relative;user-select:none;border-radius:3px;padding:2px 5px;margin-bottom:2px;width:fit-content}.nvjs-logo.svelte-5spisq{width:35px;height:20px;float:left;margin-left:-5px;margin-right:2px;opacity:0.85}.nvjs-ll-data.svelte-5spisq{font-variant-numeric:tabular-nums}.nvjs-ll-value{margin-left:3px}.nvjs-ll-x{margin-left:3px}.nvjs-eye.svelte-5spisq{width:20px;height:20px;float:right;margin-right:2px;margin-left:7px}.nvjs-eye.svelte-5spisq:hover{filter:brightness(1.25)}.king-icon.svelte-5spisq{padding-left:8px;padding-right:8px;margin-right:4px;filter:grayscale()}")}function Tn(i,e,t){const s=i.slice();return s[41]=e[t],s[43]=t,s}function wn(i,e,t){const s=i.slice();return s[41]=e[t],s[43]=t,s}function En(i){let e;return{c(){e=Q("div"),x(e,"class","nvjs-logo svelte-5spisq"),x(e,"style",i[16])},m(t,s){Z(t,e,s)},p(t,s){s[0]&65536&&x(e,"style",t[16])},d(t){t&&q(e)}}}function Sn(i){let e;return{c(){e=Q("span"),x(e,"class","king-icon svelte-5spisq"),x(e,"style",i[14])},m(t,s){Z(t,e,s)},p(t,s){s[0]&16384&&x(e,"style",t[14])},d(t){t&&q(e)}}}function Yn(i){let e;function t(r,o){if(!r[12]&&!r[11])return go;if(r[11]&&r[8].length)return po;if(r[8].length)return fo}let s=t(i),n=s&&s(i);return{c(){e=Q("span"),n&&n.c(),x(e,"class","nvjs-ll-data svelte-5spisq"),x(e,"style",i[17])},m(r,o){Z(r,e,o),n&&n.m(e,null)},p(r,o){s===(s=t(r))&&n?n.p(r,o):(n&&n.d(1),n=s&&s(r),n&&(n.c(),n.m(e,null))),o[0]&131072&&x(e,"style",r[17])},d(r){r&&q(e),n&&n.d()}}}function fo(i){let e,t=i[12](i[8],i[10]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Mn(Tn(i,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Je()},m(n,r){for(let o=0;o<s.length;o+=1)s[o].m(n,r);Z(n,e,r)},p(n,r){if(r[0]&2102528){t=n[12](n[8],n[10]);let o;for(o=0;o<t.length;o+=1){const u=Tn(n,t,o);s[o]?s[o].p(u,r):(s[o]=Mn(u),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){ct(s,n),n&&q(e)}}}function po(i){let e,t=i[11](i[8],i[10],i[21])+"",s;return{c(){e=new gs(!1),s=Je(),e.a=s},m(n,r){e.m(t,n,r),Z(n,s,r)},p(n,r){r[0]&3328&&t!==(t=n[11](n[8],n[10],n[21])+"")&&e.p(t)},d(n){n&&q(s),n&&e.d()}}}function go(i){let e,t=i[8],s=[];for(let n=0;n<t.length;n+=1)s[n]=kn(wn(i,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Je()},m(n,r){for(let o=0;o<s.length;o+=1)s[o].m(n,r);Z(n,e,r)},p(n,r){if(r[0]&2097408){t=n[8];let o;for(o=0;o<t.length;o+=1){const u=wn(n,t,o);s[o]?s[o].p(u,r):(s[o]=kn(u),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){ct(s,n),n&&q(e)}}}function Mn(i){let e,t=i[21](i[41][0])+"",s,n,r;return{c(){e=Q("span"),s=Ze(t),n=Ie(),x(e,"class","nvjs-ll-value"),x(e,"style",r=`color: ${i[41][1]}`)},m(o,u){Z(o,e,u),ie(e,s),ie(e,n)},p(o,u){u[0]&5376&&t!==(t=o[21](o[41][0])+"")&&Mt(s,t),u[0]&5376&&r!==(r=`color: ${o[41][1]}`)&&x(e,"style",r)},d(o){o&&q(e)}}}function mo(i){let e;function t(r,o){return r[41]!=null?Io:vo}let s=t(i),n=s(i);return{c(){n.c(),e=Je()},m(r,o){n.m(r,o),Z(r,e,o)},p(r,o){s===(s=t(r))&&n?n.p(r,o):(n.d(1),n=s(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){n.d(r),r&&q(e)}}}function vo(i){let e;return{c(){e=Q("span"),e.textContent="x",x(e,"class","nvjs-ll-x")},m(t,s){Z(t,e,s)},p:W,d(t){t&&q(e)}}}function Io(i){let e,t=i[21](i[41])+"",s,n;return{c(){e=Q("span"),s=Ze(t),n=Ie(),x(e,"class","nvjs-ll-value")},m(r,o){Z(r,e,o),ie(e,s),ie(e,n)},p(r,o){o[0]&256&&t!==(t=r[21](r[41])+"")&&Mt(s,t)},d(r){r&&q(e)}}}function kn(i){let e,t=i[43]>0&&mo(i);return{c(){t&&t.c(),e=Je()},m(s,n){t&&t.m(s,n),Z(s,e,n)},p(s,n){s[43]>0&&t.p(s,n)},d(s){t&&t.d(s),s&&q(e)}}}function Jn(i){let e;return{c(){e=Q("div"),x(e,"class","nvjs-eye svelte-5spisq"),x(e,"style",i[15])},m(t,s){Z(t,e,s)},p(t,s){s[0]&32768&&x(e,"style",t[15])},d(t){t&&q(e)}}}function xn(i){let e,t,s={gridId:i[0],ov:i[1],props:i[2],height:i[6].height};return e=new co({props:s}),i[31](e),{c(){ge(e.$$.fragment)},m(n,r){ue(e,n,r),t=!0},p(n,r){const o={};r[0]&1&&(o.gridId=n[0]),r[0]&2&&(o.ov=n[1]),r[0]&4&&(o.props=n[2]),r[0]&64&&(o.height=n[6].height),e.$set(o)},i(n){t||(U(e.$$.fragment,n),t=!0)},o(n){X(e.$$.fragment,n),t=!1},d(n){i[31](null),he(e,n)}}}function yo(i){let e,t,s,n,r,o,u,a,l,d,m,I=i[1].main&&i[2].showLogo&&En(i),y=i[1].main&&Sn(i),b=i[7]&&!i[3]&&Yn(i),p=!i[7]&&!i[3]&&Jn(i),g=i[3]&&xn(i);return{c(){e=Q("div"),I&&I.c(),t=Ie(),s=Q("span"),n=Ze(i[18]),r=Ie(),y&&y.c(),o=Ie(),b&&b.c(),u=Ie(),p&&p.c(),a=Ie(),g&&g.c(),x(s,"class","nvjs-ll-name svelte-5spisq"),x(e,"class","nvjs-legend-line svelte-5spisq"),x(e,"style",i[13])},m(A,Y){Z(A,e,Y),I&&I.m(e,null),ie(e,t),ie(e,s),ie(s,n),ie(s,r),y&&y.m(s,null),i[30](s),ie(e,o),b&&b.m(e,null),ie(e,u),p&&p.m(e,null),ie(e,a),g&&g.m(e,null),i[32](e),l=!0,d||(m=[Qe(e,"mousemove",i[19]),Qe(e,"mouseleave",i[20])],d=!0)},p(A,Y){A[1].main&&A[2].showLogo?I?I.p(A,Y):(I=En(A),I.c(),I.m(e,t)):I&&(I.d(1),I=null),(!l||Y[0]&262144)&&Mt(n,A[18]),A[1].main?y?y.p(A,Y):(y=Sn(A),y.c(),y.m(s,null)):y&&(y.d(1),y=null),A[7]&&!A[3]?b?b.p(A,Y):(b=Yn(A),b.c(),b.m(e,u)):b&&(b.d(1),b=null),!A[7]&&!A[3]?p?p.p(A,Y):(p=Jn(A),p.c(),p.m(e,a)):p&&(p.d(1),p=null),A[3]?g?(g.p(A,Y),Y[0]&8&&U(g,1)):(g=xn(A),g.c(),U(g,1),g.m(e,null)):g&&(Ae(),X(g,1,1,()=>{g=null}),_e()),(!l||Y[0]&8192)&&x(e,"style",A[13])},i(A){l||(U(g),l=!0)},o(A){X(g),l=!1},d(A){A&&q(e),I&&I.d(),y&&y.d(),i[30](null),b&&b.d(),p&&p.d(),g&&g.d(),i[32](null),d=!1,Ve(m)}}}function bo(i,e,t){let s,n,r,o,u,a,l,d,m,I,y,b,p,g,A,Y,E,P,L,F,M,{gridId:R}=e,{ov:O}=e,{props:J}=e,{layout:H}=e,k=Pe.instance(J.id),_=le.instance(J.id),T=!1,w,B,z;Ke(()=>{_.on(`${s}:update-ll`,V)}),ut(()=>{_.off(s)});function V(){t(7,F=O.settings.display!==!1),z&&z.update()}function $(D){D.clientX<y.x+y.width+35&&!T&&setTimeout(()=>{G(),t(3,T=!0)})}function ne(D){setTimeout(()=>{G(),t(3,T=!1)})}function Me(D,me=L){return D==null?"x":typeof D!="number"?D:D.toFixed(me)}function ae(D){return Object.values(D).find(me=>me.scaleSpecs.ovIdxs.includes(O.id))||D[H.scaleIndex]}function G(){t(6,I=w.getBoundingClientRect())}function se(D){xe[D?"unshift":"push"](()=>{B=D,t(5,B)})}function we(D){xe[D?"unshift":"push"](()=>{z=D,t(9,z)})}function ze(D){xe[D?"unshift":"push"](()=>{w=D,t(4,w)})}return i.$$set=D=>{"gridId"in D&&t(0,R=D.gridId),"ov"in D&&t(1,O=D.ov),"props"in D&&t(2,J=D.props),"layout"in D&&t(22,H=D.layout)},i.$$.update=()=>{var D;i.$$.dirty[0]&3&&(s=`ll-${R}-${O.id}`),i.$$.dirty[0]&2&&t(18,n=(D=O.name)!=null?D:`${O.type||"Overlay"}-${O.id}`),i.$$.dirty[0]&4&&t(29,r=parseInt(J.config.FONT.split("px").shift())),i.$$.dirty[0]&541065222&&t(28,o=`
    font: ${J.config.FONT};
    font-size: ${r+(O.main?5:3)}px;
    font-weight: 300;
    color: ${J.colors.textLG};
    background: ${J.colors.llBack};
    border: 1px solid transparent;
    margin-right: 30px;
    max-width: ${H.width-20}px;
    overflow-x: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
`),i.$$.dirty[0]&4&&t(27,u=`
    background: ${J.colors.back};
    border: 1px solid ${J.colors.grid};
`),i.$$.dirty[0]&536870918&&t(17,a=`
    font-size: ${r+(O.main?3:2)}px;
    color: ${J.colors.llValue}
`),i.$$.dirty[0]&2&&t(7,F=O.settings.display!==!1),i.$$.dirty[0]&128&&t(23,M=F?"open":"closed"),i.$$.dirty[0]&16&&t(6,I=w?w.getBoundingClientRect():{}),i.$$.dirty[0]&8388672&&t(15,d=`
    background-image: url(${gi[M+"-eye"]});
    background-size: contain;
    background-repeat: no-repeat;
    margin-top: ${(I.height-20)*.5-3}px;
    margin-bottom: -2px;
`),i.$$.dirty[0]&64&&`${I.width}${I.height}`,i.$$.dirty[0]&4&&t(25,Y=J.cursor.values||[]),i.$$.dirty[0]&33554435&&t(8,E=(Y[R]||[])[O.id]||[]),i.$$.dirty[0]&392&&t(14,m=`
    background-image: url(${gi.king3});
    background-size: contain;
    background-repeat: no-repeat;
    margin-left: ${T||!F||!E.length?7:3}px;
`),i.$$.dirty[0]&32&&(y=B?B.getBoundingClientRect():{}),i.$$.dirty[0]&402653192&&t(13,b=o+(T?u:"")),i.$$.dirty[0]&3&&t(26,p=k.getLegendFns(R,O.id)||{}),i.$$.dirty[0]&67108864&&t(12,g=p.legend),i.$$.dirty[0]&67108864&&t(11,A=p.legendHtml),i.$$.dirty[0]&4194304&&t(24,P=ae(H.scales)),i.$$.dirty[0]&16777216&&t(10,L=P.prec)},t(16,l=`
    background-image: url(${uo[0]});
    background-size: contain;
    background-repeat: no-repeat;
`),[R,O,J,T,w,B,I,F,E,z,L,A,g,b,m,d,l,a,n,$,ne,Me,H,M,P,Y,p,u,o,r,se,we,ze]}class Ao extends be{constructor(e){super(),ye(this,e,bo,yo,de,{gridId:0,ov:1,props:2,layout:22},ho,[-1,-1])}}function _o(i){gt(i,"svelte-16ib1si",".nvjs-legend.svelte-16ib1si{pointer-events:none}")}function Cn(i,e,t){const s=i.slice();return s[9]=e[t],s[11]=t,s}function On(i){let e,t,s=i[5].panes()[i[0]].overlays,n=[];for(let o=0;o<s.length;o+=1)n[o]=Pn(Cn(i,s,o));const r=o=>X(n[o],1,1,()=>{n[o]=null});return{c(){e=Q("div");for(let o=0;o<n.length;o+=1)n[o].c();x(e,"class","nvjs-legend svelte-16ib1si"),x(e,"style",i[4])},m(o,u){Z(o,e,u);for(let a=0;a<n.length;a+=1)n[a].m(e,null);t=!0},p(o,u){if(u&39){s=o[5].panes()[o[0]].overlays;let a;for(a=0;a<s.length;a+=1){const l=Cn(o,s,a);n[a]?(n[a].p(l,u),U(n[a],1)):(n[a]=Pn(l),n[a].c(),U(n[a],1),n[a].m(e,null))}for(Ae(),a=s.length;a<n.length;a+=1)r(a);_e()}(!t||u&16)&&x(e,"style",o[4])},i(o){if(!t){for(let u=0;u<s.length;u+=1)U(n[u]);t=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)X(n[u]);t=!1},d(o){o&&q(e),ct(n,o)}}}function Pn(i){let e,t;return e=new Ao({props:{gridId:i[0],props:i[1],layout:i[2],ov:i[9]}}),{c(){ge(e.$$.fragment)},m(s,n){ue(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.gridId=s[0]),n&2&&(r.props=s[1]),n&4&&(r.layout=s[2]),n&1&&(r.ov=s[9]),e.$set(r)},i(s){t||(U(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function Nn(i){let e=i[5].panes()[i[0]],t,s,n=e&&On(i);return{c(){n&&n.c(),t=Je()},m(r,o){n&&n.m(r,o),Z(r,t,o),s=!0},p(r,o){o&1&&(e=r[5].panes()[r[0]]),e?n?(n.p(r,o),o&1&&U(n,1)):(n=On(r),n.c(),U(n,1),n.m(t.parentNode,t)):n&&(Ae(),X(n,1,1,()=>{n=null}),_e())},i(r){s||(U(n),s=!0)},o(r){X(n),s=!1},d(r){n&&n.d(r),r&&q(t)}}}function To(i){let e=i[3],t,s,n=Nn(i);return{c(){n.c(),t=Je()},m(r,o){n.m(r,o),Z(r,t,o),s=!0},p(r,[o]){o&8&&de(e,e=r[3])?(Ae(),X(n,1,1,W),_e(),n=Nn(r),n.c(),U(n,1),n.m(t.parentNode,t)):n.p(r,o)},i(r){s||(U(n),s=!0)},o(r){X(n),s=!1},d(r){r&&q(t),n.d(r)}}}function wo(i,e,t){let s,{id:n}=e,{props:r}=e,{main:o}=e,{layout:u}=e,a=Oe.instance(r.id),l=le.instance(r.id),d=0;l.on(`legend-${n}:update-legend`,m),ut(()=>{l.off(`legend-${n}`)});function m(){t(3,d++,d)}return i.$$set=I=>{"id"in I&&t(0,n=I.id),"props"in I&&t(1,r=I.props),"main"in I&&t(6,o=I.main),"layout"in I&&t(2,u=I.layout)},i.$$.update=()=>{i.$$.dirty&4&&t(4,s=`
    left: ${u.sbMax[0]+5}px;
    top: ${(u.offset||0)+5}px;
    position: absolute;
`)},[n,r,u,d,s,a,o]}class Eo extends be{constructor(e){super(),ye(this,e,wo,To,de,{id:0,props:1,main:6,layout:2},_o)}}function Rn(i){let e,t,s,n,r,o,u,a,l,d,m,I={id:i[1],props:i[2],layout:i[0],main:i[3]};t=new Qr({props:I}),i[10](t),n=new Eo({props:{id:i[1],props:i[2],layout:i[0],main:i[3]}});const y=[Yo,So],b=[];function p(E,P){return E[9].length?0:1}o=p(i),u=b[o]=y[o](i);const g=[ko,Mo],A=[];function Y(E,P){return E[8].length?0:1}return l=Y(i),d=A[l]=g[l](i),{c(){e=Q("div"),ge(t.$$.fragment),s=Ie(),ge(n.$$.fragment),r=Ie(),u.c(),a=Ie(),d.c(),x(e,"class","nvjs-pane svelte-9o7s1l"),x(e,"style",i[7])},m(E,P){Z(E,e,P),ue(t,e,null),ie(e,s),ue(n,e,null),ie(e,r),b[o].m(e,null),ie(e,a),A[l].m(e,null),m=!0},p(E,P){const L={};P&2&&(L.id=E[1]),P&4&&(L.props=E[2]),P&1&&(L.layout=E[0]),P&8&&(L.main=E[3]),t.$set(L);const F={};P&2&&(F.id=E[1]),P&4&&(F.props=E[2]),P&1&&(F.layout=E[0]),P&8&&(F.main=E[3]),n.$set(F);let M=o;o=p(E),o===M?b[o].p(E,P):(Ae(),X(b[M],1,1,()=>{b[M]=null}),_e(),u=b[o],u?u.p(E,P):(u=b[o]=y[o](E),u.c()),U(u,1),u.m(e,a));let R=l;l=Y(E),l===R?A[l].p(E,P):(Ae(),X(A[R],1,1,()=>{A[R]=null}),_e(),d=A[l],d?d.p(E,P):(d=A[l]=g[l](E),d.c()),U(d,1),d.m(e,null)),(!m||P&128)&&x(e,"style",E[7])},i(E){m||(U(t.$$.fragment,E),U(n.$$.fragment,E),U(u),U(d),m=!0)},o(E){X(t.$$.fragment,E),X(n.$$.fragment,E),X(u),X(d),m=!1},d(E){E&&q(e),i[10](null),he(t),he(n),b[o].d(),A[l].d()}}}function So(i){let e,t;return e=new _n({props:{id:i[1],props:i[2],layout:i[0],side:"left"}}),{c(){ge(e.$$.fragment)},m(s,n){ue(e,s,n),t=!0},p(s,n){const r={};n&2&&(r.id=s[1]),n&4&&(r.props=s[2]),n&1&&(r.layout=s[0]),e.$set(r)},i(s){t||(U(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function Yo(i){let e,t,s={id:i[1],props:i[2],layout:i[0],side:"left",scales:i[9]};return e=new bn({props:s}),i[11](e),{c(){ge(e.$$.fragment)},m(n,r){ue(e,n,r),t=!0},p(n,r){const o={};r&2&&(o.id=n[1]),r&4&&(o.props=n[2]),r&1&&(o.layout=n[0]),r&512&&(o.scales=n[9]),e.$set(o)},i(n){t||(U(e.$$.fragment,n),t=!0)},o(n){X(e.$$.fragment,n),t=!1},d(n){i[11](null),he(e,n)}}}function Mo(i){let e,t;return e=new _n({props:{id:i[1],props:i[2],layout:i[0],side:"right"}}),{c(){ge(e.$$.fragment)},m(s,n){ue(e,s,n),t=!0},p(s,n){const r={};n&2&&(r.id=s[1]),n&4&&(r.props=s[2]),n&1&&(r.layout=s[0]),e.$set(r)},i(s){t||(U(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function ko(i){let e,t,s={id:i[1],props:i[2],layout:i[0],side:"right",scales:i[8]};return e=new bn({props:s}),i[12](e),{c(){ge(e.$$.fragment)},m(n,r){ue(e,n,r),t=!0},p(n,r){const o={};r&2&&(o.id=n[1]),r&4&&(o.props=n[2]),r&1&&(o.layout=n[0]),r&256&&(o.scales=n[8]),e.$set(o)},i(n){t||(U(e.$$.fragment,n),t=!0)},o(n){X(e.$$.fragment,n),t=!1},d(n){i[12](null),he(e,n)}}}function Jo(i){let e,t,s=i[0]&&Rn(i);return{c(){s&&s.c(),e=Je()},m(n,r){s&&s.m(n,r),Z(n,e,r),t=!0},p(n,[r]){n[0]?s?(s.p(n,r),r&1&&U(s,1)):(s=Rn(n),s.c(),U(s,1),s.m(e.parentNode,e)):s&&(Ae(),X(s,1,1,()=>{s=null}),_e())},i(n){t||(U(s),t=!0)},o(n){X(s),t=!1},d(n){s&&s.d(n),n&&q(e)}}}function xo(i,e,t){let s,n,r,{id:o}=e,{props:u}=e,{main:a}=e,{layout:l}=e,d=le.instance(u.id),m,I,y;d.on(`pane-${o}:update-pane`,b),Ke(()=>{});function b(Y){if(!Y.grids)return;t(0,l=Y.grids[o]),d.emitSpec(`grid-${o}`,"update-grid",l);let E=y&&y.getLayers?y.getLayers():[];m&&m.setLayers(E),I&&I.setLayers(E),d.emitSpec(`sb-${o}-left`,"update-sb",l),d.emitSpec(`sb-${o}-right`,"update-sb",l)}function p(Y){xe[Y?"unshift":"push"](()=>{y=Y,t(6,y)})}function g(Y){xe[Y?"unshift":"push"](()=>{m=Y,t(4,m)})}function A(Y){xe[Y?"unshift":"push"](()=>{I=Y,t(5,I)})}return i.$$set=Y=>{"id"in Y&&t(1,o=Y.id),"props"in Y&&t(2,u=Y.props),"main"in Y&&t(3,a=Y.main),"layout"in Y&&t(0,l=Y.layout)},i.$$.update=()=>{i.$$.dirty&1&&t(9,s=N.getScalesBySide(0,l)),i.$$.dirty&1&&t(8,n=N.getScalesBySide(1,l)),i.$$.dirty&7&&t(7,r=`
    width: ${u.width}px;
    height: ${(l||{}).height}px;
    /* didn't work, coz canvas draws through the border
    border-top: ${o?"1px solid":"none"};
    border-color: ${u.colors.scale};
    box-sizing: border-box;*/
`)},[l,o,u,a,m,I,y,r,n,s,p,g,A]}class Co extends be{constructor(e){super(),ye(this,e,xo,Jo,de,{id:1,props:2,main:3,layout:0})}}const{MINUTE15:Oo,MINUTE:Fl,HOUR:mi,DAY:vi,WEEK:Po,MONTH:No,YEAR:Ii,MONTHMAP:Dn}=Le;function Ro(i,e,t){const s=e.botbar.width,n=e.botbar.height,r=e.main.sbMax[0];e.main.sbMax[1],t.font=i.config.FONT,t.clearRect(0,0,s,n),t.strokeStyle=i.colors.scale,t.beginPath(),t.moveTo(0,.5),t.lineTo(Math.floor(s+1),.5),t.stroke(),t.fillStyle=i.colors.text,t.beginPath();for(var o of e.botbar.xs){let u=Bo(i,o),a=o[0]+r;t.moveTo(a-.5,0),t.lineTo(a-.5,4.5),Uo(i,o[1][0])||(t.globalAlpha=.85),t.textAlign="center",t.fillText(u,a,18),t.globalAlpha=1}t.stroke()}function Do(i,e,t){let s=Lo(i);t.fillStyle=i.colors.panel;let n=t.measureText(s+"    "),r=Math.floor(n.width+10),o=i.cursor.x+e.main.sbMax[0],u=Math.floor(o-r*.5),a=1,l=i.config.PANHEIGHT;Fo(t,u,a,r,l+.5,3),t.fillStyle=i.colors.textHL,t.textAlign="center",t.fillText(s,o,a+16)}function Bo(i,e){let t=e[1][0],n=i.interval<vi?1:0,r=t+n*i.timezone*mi,o=new Date(r);if(e[2]===Ii||N.yearStart(t)===t)return o.getUTCFullYear();if(e[2]===No||N.monthStart(t)===t)return Dn[o.getUTCMonth()];if(N.dayStart(r)===r)return o.getUTCDate();let u=N.addZero(o.getUTCHours()),a=N.addZero(o.getUTCMinutes());return u+":"+a}function Lo(i){let e=i.cursor.t,t=i.interval,s=t<vi?1:0,n=new Date(e+s*i.timezone*mi);if(t===Ii)return n.getUTCFullYear();if(t<Ii)var r="`"+`${n.getUTCFullYear()}`.slice(-2),o=Dn[n.getUTCMonth()],u="01";t<=Po&&(u=n.getUTCDate());let a=`${u} ${o} ${r}`,l="";if(t<vi){let d=N.addZero(n.getUTCHours()),m=N.addZero(n.getUTCMinutes());l=d+":"+m}return`${a}  ${l}`}function Uo(i,e){let t=i.interval;return e===0||N.monthStart(e)===e||N.dayStart(e)===e||t<=Oo&&e%mi===0}function Fo(i,e,t,s,n,r){s<2*r&&(r=s/2),n<2*r&&(r=n/2),i.beginPath(),i.moveTo(e+r,t),i.arcTo(e+s,t,e+s,t+n,0),i.arcTo(e+s,t+n,e,t+n,r),i.arcTo(e,t+n,e,t,r),i.arcTo(e,t,e+s,t,0),i.closePath(),i.fill()}const Bn={body:Ro,panel:Do};function Go(i){let e,t;return{c(){e=Q("div"),t=Q("canvas"),x(t,"id",i[2]),x(e,"class","nvjs-botbar svelte-8gplax"),x(e,"id",i[1]),x(e,"style",i[0])},m(s,n){Z(s,e,n),ie(e,t)},p(s,[n]){n&1&&x(e,"style",s[0])},i:W,o:W,d(s){s&&q(e)}}}function Ho(i,e,t){let s,n,{props:r={}}=e,{layout:o={}}=e,u="botbar",a=`${r.id}-botbar`,l=`${r.id}-botbar-canvas`,d=le.instance(r.id);d.on(`${u}:update-bb`,b);let m,I;Ke(()=>{y()}),ut(()=>{d.off(`${u}`)});function y(){let g=o.botbar;[m,I]=ht.setup(l,g.width,g.height),b()}function b(g=o){t(3,o=g),o.botbar&&(Bn.body(r,o,I),r.cursor.x&&r.cursor.t!==void 0&&Bn.panel(r,o,I))}function p(){let g=o.botbar;!m||!g||(ht.resize(m,I,g.width,g.height),b())}return i.$$set=g=>{"props"in g&&t(4,r=g.props),"layout"in g&&t(3,o=g.layout)},i.$$.update=()=>{i.$$.dirty&24&&t(0,s=`
    background: ${r.colors.back};
    width: ${(o.botbar||{}).width}px;
    height: ${(o.botbar||{}).height}px;
`),i.$$.dirty&8&&t(5,n=(o.botbar||{}).width),i.$$.dirty&32&&p()},[s,a,l,o,r,n]}class Vo extends be{constructor(e){super(),ye(this,e,Ho,Go,de,{props:4,layout:3})}}function Xo(i){let e,t;return{c(){e=Q("div"),t=Ze("No data \xAF\\_( \xB0\uFE4F\xB0)_/\xAF"),x(e,"class","nvjs-no-data-stub svelte-172ri4o"),x(e,"style",i[0])},m(s,n){Z(s,e,n),ie(e,t)},p(s,[n]){n&1&&x(e,"style",s[0])},i:W,o:W,d(s){s&&q(e)}}}function jo(i,e,t){let s,{props:n}=e;return i.$$set=r=>{"props"in r&&t(1,n=r.props)},i.$$.update=()=>{i.$$.dirty&2&&t(0,s=`
    display: flex;
    width: ${n.width}px;
    height: ${n.height}px;
    background: ${n.colors.back};
    color: ${n.colors.scale};
    font: ${n.config.FONT};
    font-size: 18px;
    font-style: italic;
    user-select: none;
    align-items:center;
    justify-content:center;
`)},[s,n]}class zo extends be{constructor(e){super(),ye(this,e,jo,Xo,de,{props:1})}}function Ln(i,e,t){const s=i.slice();return s[23]=e[t],s[25]=t,s}function qo(i){let e,t;return e=new zo({props:{props:i[0]}}),{c(){ge(e.$$.fragment)},m(s,n){ue(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.props=s[0]),e.$set(r)},i(s){t||(U(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function Wo(i){let e,t,s,n=i[3].panes(),r=[];for(let u=0;u<n.length;u+=1)r[u]=Un(Ln(i,n,u));const o=u=>X(r[u],1,1,()=>{r[u]=null});return t=new Vo({props:{props:i[2],layout:i[1]}}),{c(){for(let u=0;u<r.length;u+=1)r[u].c();e=Ie(),ge(t.$$.fragment)},m(u,a){for(let l=0;l<r.length;l+=1)r[l].m(u,a);Z(u,e,a),ue(t,u,a),s=!0},p(u,a){if(a&14){n=u[3].panes();let d;for(d=0;d<n.length;d+=1){const m=Ln(u,n,d);r[d]?(r[d].p(m,a),U(r[d],1)):(r[d]=Un(m),r[d].c(),U(r[d],1),r[d].m(e.parentNode,e))}for(Ae(),d=n.length;d<r.length;d+=1)o(d);_e()}const l={};a&4&&(l.props=u[2]),a&2&&(l.layout=u[1]),t.$set(l)},i(u){if(!s){for(let a=0;a<n.length;a+=1)U(r[a]);U(t.$$.fragment,u),s=!0}},o(u){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)X(r[a]);X(t.$$.fragment,u),s=!1},d(u){ct(r,u),u&&q(e),he(t,u)}}}function Un(i){let e,t;return e=new Co({props:{id:i[25],layout:i[1].grids[i[25]],props:i[2],main:i[23]===i[3].chart}}),{c(){ge(e.$$.fragment)},m(s,n){ue(e,s,n),t=!0},p(s,n){const r={};n&2&&(r.layout=s[1].grids[s[25]]),n&4&&(r.props=s[2]),e.$set(r)},i(s){t||(U(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){he(e,s)}}}function Zo(i){let e,t,s,n;const r=[Wo,qo],o=[];function u(a,l){return a[1]&&a[1].main?0:1}return t=u(i),s=o[t]=r[t](i),{c(){e=Q("div"),s.c(),x(e,"class","nvjs-chart svelte-pr5wst")},m(a,l){Z(a,e,l),o[t].m(e,null),n=!0},p(a,[l]){let d=t;t=u(a),t===d?o[t].p(a,l):(Ae(),X(o[d],1,1,()=>{o[d]=null}),_e(),s=o[t],s?s.p(a,l):(s=o[t]=r[t](a),s.c()),U(s,1),s.m(e,null))},i(a){n||(U(s),n=!0)},o(a){X(s),n=!1},d(a){a&&q(e),o[t].d()}}}function Qo(i,e,t){let s,{props:n={}}=e;function r(){return E}function o(){return p}function u(){return g}function a(J){var k;let H=!((k=J.preventDefault)==null||k);delete J.preventDefault,Object.assign(p,J),F(p,H)}function l(J){var k;let H=!((k=J.preventDefault)==null||k);delete J.preventDefault,Object.assign(g,J),P(g,H)}let d=Oe.instance(n.id),m=Pe.instance(n.id),I=le.instance(n.id),y=Pt.instance(n.id);y.init(n);let b=y.detectInterval(),p=y.defaultRange(),g=new Us,A={},Y=new tr(n),E=null;I.on("chart:cursor-changed",P),I.on("chart:cursor-locked",L),I.on("chart:range-changed",F),I.on("chart:update-layout",R),I.on("chart:full-update",O),Ke(()=>{d.calcSubset(p),d.detectMain(),m.init(n),y.updatePanesHash(),t(1,E=new Qi(s,d))}),ut(()=>{I.off("chart")});function P(J,H=!0){H&&I.emit("$cursor-update",J),J.mode&&t(11,g.mode=J.mode,g),g.mode!=="explore"&&(g.xSync(d,E,s,J),J.visible===!1&&setTimeout(()=>R())),R()}function L(J){g.scrollLock&&J||t(11,g.locked=J,g)}function F(J,H=!0){if(H&&I.emit("$range-update",J),t(10,p=J),d.updateRange(p),g.locked)return;g.xValues(d,E,s),g.yValues(E),R();let k=n.config.QUANTIZE_AFTER;k&&N.afterAll(A,M,k)}function M(){g.xSync(d,E,s,g),R()}function R(J=!0){if(J&&I.emit("$chart-update"),y.panesChanged())return O();t(11,g=g),t(1,E=new Qi(s,d)),I.emit("update-pane",E),I.emitSpec("botbar","update-bb",E)}function O(J={}){t(9,b=y.detectInterval()),(!p.length||J.resetRange)&&t(10,p=y.defaultRange()),d.calcSubset(p),d.init(d.data),d.detectMain(),m.store(),m.init(n),y.updatePanesHash(),R(),I.emit("remake-grid")}return i.$$set=J=>{"props"in J&&t(0,n=J.props)},i.$$.update=()=>{i.$$.dirty&3585&&t(2,s=Object.assign({interval:b,range:p,ctx:Y,cursor:g},n))},[n,E,s,d,r,o,u,a,l,b,p,g]}class Ko extends be{constructor(e){super(),ye(this,e,Qo,Zo,de,{props:0,getLayout:4,getRange:5,getCursor:6,setRange:7,setCursor:8})}get getLayout(){return this.$$.ctx[4]}get getRange(){return this.$$.ctx[5]}get getCursor(){return this.$$.ctx[6]}get setRange(){return this.$$.ctx[7]}get setCursor(){return this.$$.ctx[8]}}function $o(i){gt(i,"svelte-z09kpl",".svelte-z09kpl::after,.svelte-z09kpl::before{box-sizing:content-box}.night-vision.svelte-z09kpl{position:relative}")}function el(i){let e,t,s,n={props:i[1]};return t=new Ko({props:n}),i[19](t),{c(){e=Q("div"),ge(t.$$.fragment),x(e,"class","night-vision svelte-z09kpl"),x(e,"id",i[0]),x(e,"style",i[3])},m(r,o){Z(r,e,o),ue(t,e,null),s=!0},p(r,[o]){const u={};o&2&&(u.props=r[1]),t.$set(u),(!s||o&1)&&x(e,"id",r[0]),(!s||o&8)&&x(e,"style",r[3])},i(r){s||(U(t.$$.fragment,r),s=!0)},o(r){X(t.$$.fragment,r),s=!1},d(r){r&&q(e),i[19](null),he(t)}}}function tl(i,e,t){let s,n,r,o,u,a;function l(){return a}let{showLogo:d=!1}=e,{id:m="nvjs"}=e,{width:I=750}=e,{height:y=420}=e,{colors:b={}}=e,{toolbar:p=!1}=e,{scripts:g=[]}=e,{config:A={}}=e,{indexBased:Y=!1}=e,{timezone:E=0}=e,{data:P={}}=e,{autoResize:L=!1}=e;function F(M){xe[M?"unshift":"push"](()=>{a=M,t(2,a)})}return i.$$set=M=>{"showLogo"in M&&t(5,d=M.showLogo),"id"in M&&t(0,m=M.id),"width"in M&&t(6,I=M.width),"height"in M&&t(7,y=M.height),"colors"in M&&t(8,b=M.colors),"toolbar"in M&&t(9,p=M.toolbar),"scripts"in M&&t(10,g=M.scripts),"config"in M&&t(11,A=M.config),"indexBased"in M&&t(12,Y=M.indexBased),"timezone"in M&&t(13,E=M.timezone),"data"in M&&t(14,P=M.data),"autoResize"in M&&t(15,L=M.autoResize)},i.$$.update=()=>{i.$$.dirty&2048&&t(16,s=Object.assign(Le.ChartConfig,A)),i.$$.dirty&2560&&t(18,n=p?A.TOOLBAR:0),i.$$.dirty&256&&t(17,r=Object.assign(Le.COLORS,b)),i.$$.dirty&472289&&t(1,o={showLogo:d,id:m,width:I-n,height:y,colors:r,scripts:g,config:s,indexBased:Y,timezone:E}),i.$$.dirty&2&&t(3,u=`
    width: ${o.width}px;
    height: ${o.height}px;
`)},[m,o,a,u,l,d,I,y,b,p,g,A,Y,E,P,L,s,r,n,F]}class il extends be{constructor(e){super(),ye(this,e,tl,el,de,{getChart:4,showLogo:5,id:0,width:6,height:7,colors:8,toolbar:9,scripts:10,config:11,indexBased:12,timezone:13,data:14,autoResize:15},$o)}get getChart(){return this.$$.ctx[4]}get showLogo(){return this.$$.ctx[5]}set showLogo(e){this.$$set({showLogo:e}),pe()}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),pe()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),pe()}get height(){return this.$$.ctx[7]}set height(e){this.$$set({height:e}),pe()}get colors(){return this.$$.ctx[8]}set colors(e){this.$$set({colors:e}),pe()}get toolbar(){return this.$$.ctx[9]}set toolbar(e){this.$$set({toolbar:e}),pe()}get scripts(){return this.$$.ctx[10]}set scripts(e){this.$$set({scripts:e}),pe()}get config(){return this.$$.ctx[11]}set config(e){this.$$set({config:e}),pe()}get indexBased(){return this.$$.ctx[12]}set indexBased(e){this.$$set({indexBased:e}),pe()}get timezone(){return this.$$.ctx[13]}set timezone(e){this.$$set({timezone:e}),pe()}get data(){return this.$$.ctx[14]}set data(e){this.$$set({data:e}),pe()}get autoResize(){return this.$$.ctx[15]}set autoResize(e){this.$$set({autoResize:e}),pe()}}function nl(i){new ResizeObserver(t=>{let s=i.root.getBoundingClientRect();i.width=s.width,i.height=s.height}).observe(i.root)}class sl{constructor(e,t={}){this._data=t.data||{},this._scripts=t.scripts||[];let s=t.id||"nvjs";this.hub=Oe.instance(s),this.meta=Pe.instance(s),this.scan=Pt.instance(s),this.events=le.instance(s),this.scriptHub=pi.instance(s),this.hub.init(this._data),this.scriptHub.init(this._scripts),this.root=document.getElementById(e),this.comp=new il({target:this.root,props:t}),t.autoResize&&nl(this)}get id(){return this.comp.id}set id(e){this.comp.$set({id:e})}get width(){return this.comp.width}set width(e){this.comp.$set({width:e}),setTimeout(()=>this.update())}get height(){return this.comp.height}set height(e){this.comp.$set({height:e}),setTimeout(()=>this.update())}get colors(){return this.comp.colors}set colors(e){this.comp.$set({colors:e})}get showLogo(){return this.comp.showLogo}set showLogo(e){this.comp.$set({id:e})}get scripts(){return this._scripts}set scripts(e){this._scripts=e,this.scriptHub.init(this._scripts),this.update("full")}get data(){return this._data}set data(e){this._data=e,this.update("full")}get config(){return this.comp.config}set config(e){this.comp.$set({config:e})}get indexBased(){return this.comp.indexBased}set indexBased(e){this.comp.$set({indexBased:e})}get timezone(){return this.comp.timezone}set timezone(e){this.comp.$set({timezone:e}),setTimeout(()=>this.update())}get layout(){let e=this.comp.getChart();return e?e.getLayout():null}get range(){let e=this.comp.getChart();return e?e.getRange():null}set range(e){let t=this.comp.getChart();!t||t.setRange(e)}get cursor(){let e=this.comp.getChart();return e?e.getCursor():null}set cursor(e){let t=this.comp.getChart();!t||t.setCursor(e)}update(s="layout",t={}){var[s,n]=s.split("-");const r=this.events;switch(s){case"layout":r.emitSpec("chart","update-layout",t);break;case"range":this.hub.updateRange(this.range),r.emitSpec("chart","update-layout",t);break;case"full":this.hub.init(this._data),r.emitSpec("chart","full-update",t);break;case"grid":if(n===void 0)r.emit("remake-grid");else{let o=`grid-${n}`;r.emitSpec(o,"remake-grid",t)}break;case"legend":if(n===void 0)r.emit("update-legend");else{let o=`legend-${n}`;r.emitSpec(o,"update-legend",t)}break}}fullReset(){this.update("full",{resetRange:!0})}}K.DataHub=Oe,K.DataScan=Pt,K.Events=le,K.MetaHub=Pe,K.NightVision=sl,K.Scripts=pi,Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
